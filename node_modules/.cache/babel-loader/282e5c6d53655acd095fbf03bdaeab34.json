{"ast":null,"code":"import _toConsumableArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16;import React from\"react\";import\"./RoomDetail.css\";import{useParams,useRouteMatch,useHistory}from\"react-router-dom\";import MapProductDetail from\"./MapProductDetail\";import firebase from\"firebase\";import styled from\"styled-components\";import{BsFillHeartFill}from\"react-icons/bs\";import DateRangePickerExample from\"./DateRangePickExample\";import CountNumber from\"./\bCountNumber\";import Swal from\"sweetalert2/dist/sweetalert2.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Like=styled.button(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  border: none;\\n  padding-right: 10px;\\n  padding-left: 10px;\\n  padding-top: 8px;\\n  border-radius: 50%;\\n  font-size: 20px;\\n  margin-left: 20px;\\n  cursor: pointer;\\n\"])));var CuntDate=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin-top: 20px;\\n\"])));var InstantBook=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  background-color: #00bfac;\\n  /* justify-content: center; */\\n  position: relative;\\n  border: 1px solid #00bfac;\\n  width: 293px;\\n  color: white;\\n  border-radius: 5px;\\n  font-size: 15px;\\n  font-weight: 700;\\n  height: 50px;\\n  margin: 20px 30px;\\n  cursor: pointer;\\n  &:hover {\\n    border: 1px solid #00bfac;\\n    color: #00bfac;\\n    background: white;\\n  }\\n\"])));var RoomsDetailName=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  font-size: 30px;\\n  font-family: \\\"Montserrat\\\", sans-serif;\\n  font-weight: 500;\\n  width: 100%;\\n\"])));var RoomsDetailBox=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin: 50px;\\n  padding: 10px;\\n\"])));var RoomsDetailImage=styled.img(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  width: 88%;\\n  height: 450px;\\n  margin: 5px;\\n  object-fit: cover;\\n  border-radius: 7px;\\n  margin-right: 10px;\\n\"])));var RoomsDetailStars=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  color: black;\\n  padding: 10px 0;\\n  font-weight: 500;\\n\"])));var RoomsDetailAddress=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  color: rgb(151, 145, 145);\\n  padding: 10px 0;\\n  margin-top: -2px;\\n  margin-left: 10px;\\n\"])));var RoomsOwnerName=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  margin-top: 10px;\\n  font-size: 20px;\\n  font-weight: 500;\\n  color: gray;\\n\"])));var RoomsOwnerIntroduce=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  font-size: 15px;\\n  width: 90%;\\n  margin-top: 10px;\\n\"])));var RoomsCheckBox=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  margin: 5px 150px 10px 30px;\\n  border-radius: 12px;\\n  box-shadow: rgb(0 0 0 / 12%) 0px 6px 16px;\\n  border-style: solid;\\n  border: 1px solid rgb(221, 221, 221);\\n  width: 350px;\\n  height: 320px;\\n\"])));var RoomsBoxPrice=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  font-size: 20px;\\n  font-weight: 600;\\n  height: 50px;\\n\"])));var RoomsBoxStarts=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  color: black;\\n  font-weight: 500;\\n  font-size: 15px;\\n  margin-top: 4px;\\n\"])));var RoomsBoxFirstRow=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  display: flex;\\n  margin: 20px 20px 0px 20px;\\n  padding: 10px;\\n  justify-content: space-between;\\n\"])));var Equipment=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 60%;\\n  margin-left: 50px;\\n\"])));var EquipmentArea=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  border-radius: 7px;\\n  border: 1px solid rgb(221, 221, 221);\\n  width: 27%;\\n  height: 350px;\\n  margin-right: 20px;\\n  margin-top: -250px;\\n\"])));function RoomDetail(){var _item$collectionBy;var _useParams=useParams(),itemID=_useParams.itemID;var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),item=_React$useState2[0],setItem=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),startDate=_React$useState4[0],setStartDate=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),endDate=_React$useState6[0],setEndDate=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),count=_React$useState8[0],setCount=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),comment=_React$useState10[0],setComment=_React$useState10[1];var _useRouteMatch=useRouteMatch(),url=_useRouteMatch.url;var history=useHistory();// const [count, setCount] = useState(0);\nReact.useEffect(function(){firebase.firestore().collection(\"product\").doc(itemID).onSnapshot(function(docSnapshot){var data=docSnapshot.data();setItem(data);});// .get()\n// .then((docSnapshot) => {\n//   const data = docSnapshot.data();\n//   setItem(data);\n// });\n},[]);React.useEffect(function(){firebase.firestore().collection(\"comment\").where(\"itemID\",\"==\",itemID).get().then(function(snapshot){console.log(typeof snapshot);snapshot.forEach(function(doc){var data=doc.data();console.log(data);setComment(function(comment){return[].concat(_toConsumableArray(comment),[data]);});});});},[]);function toggleCollection(){var uid=firebase.auth().currentUser.uid;if(isCollected){firebase.firestore().collection(\"product\").doc(itemID).update({collectionBy:firebase.firestore.FieldValue.arrayRemove(uid)});}else{firebase.firestore().collection(\"product\").doc(itemID).update({collectionBy:firebase.firestore.FieldValue.arrayUnion(uid)});}}var isCollected=(_item$collectionBy=item.collectionBy)===null||_item$collectionBy===void 0?void 0:_item$collectionBy.includes(firebase.auth().currentUser.uid);function onSubmit(){// const documentRef = firebase.firestore().collection(\"order\").doc();\nvar orderID=firebase.firestore().collection(\"order\").doc().id;if(startDate===\"\"){Swal.fire(\"請選擇入住時間\");}else if(endDate===\"\"){Swal.fire(\"請輸入退房時間\");}else if(count===0){Swal.fire(\"請選擇入住人數\");}else{firebase.firestore().collection(\"order\").doc(orderID).set({startDate:startDate,endDate:endDate,uid:firebase.auth().currentUser.uid,id:itemID,count:count}).then(function(){history.push(\"\".concat(url,\"/order/\").concat(orderID));});}}return/*#__PURE__*/_jsx(\"div\",{className:\"rooms__detail__container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rooms__detail__wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__detail__introduce\",children:[/*#__PURE__*/_jsxs(RoomsDetailBox,{children:[/*#__PURE__*/_jsx(RoomsDetailName,{children:item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__name__info\",children:[/*#__PURE__*/_jsxs(RoomsDetailStars,{children:[\"\\u2605\",item.stars,\" (\",comment.length,\" comments)\"]}),/*#__PURE__*/_jsxs(RoomsDetailAddress,{children:[\"\\u2332\",item.address]}),/*#__PURE__*/_jsx(Like,{onClick:toggleCollection,style:isCollected?{color:\"red\"}:{color:\"grey\"},children:/*#__PURE__*/_jsx(BsFillHeartFill,{})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rooms__detail__carousel\",children:/*#__PURE__*/_jsx(RoomsDetailImage,{src:item.imageURL})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__owner\",children:[/*#__PURE__*/_jsx(RoomsOwnerName,{children:\"Hosted by Victor Chen\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__stick\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rooms__owner__detail\",children:/*#__PURE__*/_jsx(RoomsOwnerIntroduce,{children:item.comment})}),/*#__PURE__*/_jsx(\"div\",{className:\"rooms__detail__check\",children:/*#__PURE__*/_jsxs(RoomsCheckBox,{children:[/*#__PURE__*/_jsxs(RoomsBoxFirstRow,{children:[/*#__PURE__*/_jsxs(RoomsBoxPrice,{children:[\"NT.\",item.price,\"/\\u665A\"]}),/*#__PURE__*/_jsxs(RoomsBoxStarts,{children:[\"\\u2605\",item.stars,\" (\",comment.length,\" comments)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rooms__box__date\",children:/*#__PURE__*/_jsx(DateRangePickerExample,{startDate:startDate,setStartDate:setStartDate,endDate:endDate,setEndDate:setEndDate})}),/*#__PURE__*/_jsx(CuntDate,{children:/*#__PURE__*/_jsx(CountNumber,{count:count,setCount:setCount})}),/*#__PURE__*/_jsx(InstantBook// history.push(`${url}/order`)\n,{onClick:function onClick(){return onSubmit();},children:\"Instant book\"})]})})]})]})]}),/*#__PURE__*/_jsxs(Equipment,{children:[/*#__PURE__*/_jsxs(EquipmentArea,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Campsite area\"}),/*#__PURE__*/_jsx(\"div\",{className:\"area__point\",children:\"Park at listing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"area__point\",children:\"Canvas tent\"})]}),/*#__PURE__*/_jsxs(EquipmentArea,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Essentials\"}),/*#__PURE__*/_jsx(\"div\",{className:\"essentials__point\",children:\"Pets allowed\"}),/*#__PURE__*/_jsx(\"div\",{className:\"essentials__point\",children:\"Campfires allowed\"})]}),/*#__PURE__*/_jsxs(EquipmentArea,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Amenities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"amenities__point\",children:\"No wifi\"}),/*#__PURE__*/_jsx(\"div\",{className:\"amenities__point\",children:\"Pack out\"}),/*#__PURE__*/_jsx(\"div\",{className:\"amenities__point\",children:\"Showers\"}),/*#__PURE__*/_jsx(\"div\",{className:\"amenities__point\",children:\"Potable water\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"details__title\",children:\"Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"details__info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"details__points\",children:\"Check in:After 3PM\"}),/*#__PURE__*/_jsx(\"div\",{className:\"details__points\",children:\"Check out:Before 12PM\"}),/*#__PURE__*/_jsx(\"div\",{className:\"details__points\",children:\"On arrival: Meet and greet\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Activities\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"activities__title\",children:\"Activities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__sub__title\",children:\"Offered on the Host's property or nearby.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"activities__box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Biking\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Boating\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Hiking\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Padding\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Swimming\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Reviews\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__title\",children:[comment.length,\" Reviews\"]}),comment.map(function(data,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__box\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"reviewer__img\",alt:\"reviewer\",src:data.author.photoURL}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer__stars\",children:[\"\\u2605\",data.rating]}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__name\",children:data.author.email}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__comment\",children:data.review}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__date\",children:data.createdAt.toDate().toLocaleDateString()})]})]},index);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"porduct__detail__map\",children:/*#__PURE__*/_jsx(MapProductDetail,{})})]})})});}export default RoomDetail;","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/RoomDetail.js"],"names":["React","useParams","useRouteMatch","useHistory","MapProductDetail","firebase","styled","BsFillHeartFill","DateRangePickerExample","CountNumber","Swal","Like","button","CuntDate","div","InstantBook","RoomsDetailName","RoomsDetailBox","RoomsDetailImage","img","RoomsDetailStars","RoomsDetailAddress","RoomsOwnerName","RoomsOwnerIntroduce","RoomsCheckBox","RoomsBoxPrice","RoomsBoxStarts","RoomsBoxFirstRow","Equipment","EquipmentArea","RoomDetail","itemID","useState","item","setItem","startDate","setStartDate","endDate","setEndDate","count","setCount","comment","setComment","url","history","useEffect","firestore","collection","doc","onSnapshot","docSnapshot","data","where","get","then","snapshot","console","log","forEach","toggleCollection","uid","auth","currentUser","isCollected","update","collectionBy","FieldValue","arrayRemove","arrayUnion","includes","onSubmit","orderID","id","fire","set","push","name","stars","length","address","color","imageURL","price","map","index","author","photoURL","rating","email","review","createdAt","toDate","toLocaleDateString"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./RoomDetail.css\";\nimport { useParams, useRouteMatch, useHistory } from \"react-router-dom\";\n\nimport MapProductDetail from \"./MapProductDetail\";\nimport firebase from \"firebase\";\nimport styled from \"styled-components\";\nimport { BsFillHeartFill } from \"react-icons/bs\";\nimport DateRangePickerExample from \"./DateRangePickExample\";\nimport CountNumber from \"./\bCountNumber\";\nimport Swal from \"sweetalert2/dist/sweetalert2.js\";\n\nconst Like = styled.button`\n  border: none;\n  padding-right: 10px;\n  padding-left: 10px;\n  padding-top: 8px;\n  border-radius: 50%;\n  font-size: 20px;\n  margin-left: 20px;\n  cursor: pointer;\n`;\n\nconst CuntDate = styled.div`\n  margin-top: 20px;\n`;\n\nconst InstantBook = styled.button`\n  background-color: #00bfac;\n  /* justify-content: center; */\n  position: relative;\n  border: 1px solid #00bfac;\n  width: 293px;\n  color: white;\n  border-radius: 5px;\n  font-size: 15px;\n  font-weight: 700;\n  height: 50px;\n  margin: 20px 30px;\n  cursor: pointer;\n  &:hover {\n    border: 1px solid #00bfac;\n    color: #00bfac;\n    background: white;\n  }\n`;\n\nconst RoomsDetailName = styled.div`\n  font-size: 30px;\n  font-family: \"Montserrat\", sans-serif;\n  font-weight: 500;\n  width: 100%;\n`;\n\nconst RoomsDetailBox = styled.div`\n  margin: 50px;\n  padding: 10px;\n`;\n\nconst RoomsDetailImage = styled.img`\n  width: 88%;\n  height: 450px;\n  margin: 5px;\n  object-fit: cover;\n  border-radius: 7px;\n  margin-right: 10px;\n`;\n\nconst RoomsDetailStars = styled.div`\n  color: black;\n  padding: 10px 0;\n  font-weight: 500;\n`;\n\nconst RoomsDetailAddress = styled.div`\n  color: rgb(151, 145, 145);\n  padding: 10px 0;\n  margin-top: -2px;\n  margin-left: 10px;\n`;\n\nconst RoomsOwnerName = styled.div`\n  margin-top: 10px;\n  font-size: 20px;\n  font-weight: 500;\n  color: gray;\n`;\n\nconst RoomsOwnerIntroduce = styled.div`\n  font-size: 15px;\n  width: 90%;\n  margin-top: 10px;\n`;\n\nconst RoomsCheckBox = styled.div`\n  margin: 5px 150px 10px 30px;\n  border-radius: 12px;\n  box-shadow: rgb(0 0 0 / 12%) 0px 6px 16px;\n  border-style: solid;\n  border: 1px solid rgb(221, 221, 221);\n  width: 350px;\n  height: 320px;\n`;\n\nconst RoomsBoxPrice = styled.div`\n  font-size: 20px;\n  font-weight: 600;\n  height: 50px;\n`;\n\nconst RoomsBoxStarts = styled.div`\n  color: black;\n  font-weight: 500;\n  font-size: 15px;\n  margin-top: 4px;\n`;\n\nconst RoomsBoxFirstRow = styled.div`\n  display: flex;\n  margin: 20px 20px 0px 20px;\n  padding: 10px;\n  justify-content: space-between;\n`;\n\nconst Equipment = styled.div`\n  display: flex;\n  width: 60%;\n  margin-left: 50px;\n`;\n\nconst EquipmentArea = styled.div`\n  border-radius: 7px;\n  border: 1px solid rgb(221, 221, 221);\n  width: 27%;\n  height: 350px;\n  margin-right: 20px;\n  margin-top: -250px;\n`;\n\nfunction RoomDetail() {\n  const { itemID } = useParams();\n  const [item, setItem] = React.useState({});\n  const [startDate, setStartDate] = React.useState(\"\");\n  const [endDate, setEndDate] = React.useState(\"\");\n  const [count, setCount] = React.useState(0);\n  const [comment, setComment] = React.useState([]);\n  const { url } = useRouteMatch();\n  const history = useHistory();\n\n  // const [count, setCount] = useState(0);\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .doc(itemID)\n      .onSnapshot((docSnapshot) => {\n        const data = docSnapshot.data();\n        setItem(data);\n      });\n    // .get()\n    // .then((docSnapshot) => {\n    //   const data = docSnapshot.data();\n    //   setItem(data);\n    // });\n  }, []);\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"comment\")\n      .where(\"itemID\", \"==\", itemID)\n      .get()\n      .then((snapshot) => {\n        console.log(typeof snapshot);\n        snapshot.forEach((doc) => {\n          const data = doc.data();\n          console.log(data);\n          setComment((comment) => [...comment, data]);\n        });\n      });\n  }, []);\n\n  function toggleCollection() {\n    const uid = firebase.auth().currentUser.uid;\n    if (isCollected) {\n      firebase\n        .firestore()\n        .collection(\"product\")\n        .doc(itemID)\n        .update({\n          collectionBy: firebase.firestore.FieldValue.arrayRemove(uid),\n        });\n    } else {\n      firebase\n        .firestore()\n        .collection(\"product\")\n        .doc(itemID)\n        .update({\n          collectionBy: firebase.firestore.FieldValue.arrayUnion(uid),\n        });\n    }\n  }\n\n  const isCollected = item.collectionBy?.includes(\n    firebase.auth().currentUser.uid\n  );\n\n  function onSubmit() {\n    // const documentRef = firebase.firestore().collection(\"order\").doc();\n    const orderID = firebase.firestore().collection(\"order\").doc().id;\n    if (startDate === \"\") {\n      Swal.fire(\"請選擇入住時間\");\n    } else if (endDate === \"\") {\n      Swal.fire(\"請輸入退房時間\");\n    } else if (count === 0) {\n      Swal.fire(\"請選擇入住人數\");\n    } else {\n      firebase\n        .firestore()\n        .collection(\"order\")\n        .doc(orderID)\n        .set({\n          startDate,\n          endDate,\n          uid: firebase.auth().currentUser.uid,\n          id: itemID,\n          count,\n        })\n        .then(() => {\n          history.push(`${url}/order/${orderID}`);\n        });\n    }\n  }\n\n  return (\n    <div className=\"rooms__detail__container\">\n      <div className=\"rooms__detail__wrapper\">\n        <div className=\"rooms__detail__introduce\">\n          <RoomsDetailBox>\n            <RoomsDetailName>{item.name}</RoomsDetailName>\n            <div className=\"rooms__name__info\">\n              <RoomsDetailStars>\n                ★{item.stars} ({comment.length} comments)\n              </RoomsDetailStars>\n              <RoomsDetailAddress>⌲{item.address}</RoomsDetailAddress>\n              <Like\n                onClick={toggleCollection}\n                style={isCollected ? { color: \"red\" } : { color: \"grey\" }}\n              >\n                <BsFillHeartFill />\n              </Like>\n            </div>\n            <div className=\"rooms__detail__carousel\">\n              <RoomsDetailImage src={item.imageURL} />\n            </div>\n            <div className=\"rooms__owner\">\n              <RoomsOwnerName>Hosted by Victor Chen</RoomsOwnerName>\n              <div className=\"rooms__stick\">\n                <div className=\"rooms__owner__detail\">\n                  <RoomsOwnerIntroduce>{item.comment}</RoomsOwnerIntroduce>\n                </div>\n                <div className=\"rooms__detail__check\">\n                  <RoomsCheckBox>\n                    <RoomsBoxFirstRow>\n                      <RoomsBoxPrice>NT.{item.price}/晚</RoomsBoxPrice>\n                      <RoomsBoxStarts>\n                        ★{item.stars} ({comment.length} comments)\n                      </RoomsBoxStarts>\n                    </RoomsBoxFirstRow>\n                    <div className=\"rooms__box__date\">\n                      {/* <SubTitle>入住時間</SubTitle> */}\n                      <DateRangePickerExample\n                        startDate={startDate}\n                        setStartDate={setStartDate}\n                        endDate={endDate}\n                        setEndDate={setEndDate}\n                      />\n                      {/* <input className=\"checkin\" placeholder=\"Check in\" />\n                      <input className=\"checkout\" placeholder=\"Check out\" /> */}\n                    </div>\n                    {/* <SubTitle>入住人數</SubTitle> */}\n                    <CuntDate>\n                      <CountNumber count={count} setCount={setCount} />\n                    </CuntDate>\n                    <InstantBook\n                      // history.push(`${url}/order`)\n                      onClick={() => onSubmit()}\n                    >\n                      Instant book\n                    </InstantBook>\n                  </RoomsCheckBox>\n                </div>\n              </div>\n            </div>\n          </RoomsDetailBox>\n          <Equipment>\n            <EquipmentArea>\n              <div className=\"title\">Campsite area</div>\n              <div className=\"area__point\">Park at listing</div>\n              <div className=\"area__point\">Canvas tent</div>\n            </EquipmentArea>\n            <EquipmentArea>\n              <div className=\"title\">Essentials</div>\n\n              <div className=\"essentials__point\">Pets allowed</div>\n              <div className=\"essentials__point\">Campfires allowed</div>\n            </EquipmentArea>\n            <EquipmentArea>\n              <div className=\"title\">Amenities</div>\n\n              <div className=\"amenities__point\">No wifi</div>\n              <div className=\"amenities__point\">Pack out</div>\n              <div className=\"amenities__point\">Showers</div>\n              <div className=\"amenities__point\">Potable water</div>\n            </EquipmentArea>\n          </Equipment>\n          <div className=\"Details\">\n            <div className=\"details__title\">Details</div>\n            <div className=\"details__info\">\n              <div className=\"details__points\">Check in:After 3PM</div>\n              <div className=\"details__points\">Check out:Before 12PM</div>\n              <div className=\"details__points\">On arrival: Meet and greet</div>\n            </div>\n          </div>\n          <div className=\"Activities\">\n            <div className=\"activities__title\">Activities</div>\n            <div className=\"activities__sub__title\">\n              Offered on the Host's property or nearby.\n            </div>\n            <div className=\"activities__box\">\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Biking</div>\n              </div>\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Boating</div>\n              </div>\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Hiking</div>\n              </div>\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Padding</div>\n              </div>\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Swimming</div>\n              </div>\n            </div>\n          </div>\n          <div className=\"Reviews\">\n            <div className=\"reviews__title\">{comment.length} Reviews</div>\n            {comment.map((data, index) => {\n              return (\n                <div className=\"reviews__box\" key={index}>\n                  <img\n                    className=\"reviewer__img\"\n                    alt=\"reviewer\"\n                    src={data.author.photoURL}\n                  />\n                  <div className=\"reviewer__info\">\n                    <div className=\"reviewer__stars\">★{data.rating}</div>\n                    <div className=\"reviewer__name\">{data.author.email}</div>\n                    <div className=\"reviewer__comment\">{data.review}</div>\n                    <div className=\"reviewer__date\">\n                      {data.createdAt.toDate().toLocaleDateString()}\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"porduct__detail__map\">\n            <MapProductDetail />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default RoomDetail;\n"]},"metadata":{},"sourceType":"module"}