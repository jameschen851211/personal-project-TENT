{"ast":null,"code":"var _jsxFileName = \"/Users/victorchen/Desktop/react-test/my-app/src/components/AddCamp.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport firebase from \"firebase\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./AddCamp.css\";\nimport MapAutocomplete from \"./MapAutocamplete\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport styled from \"styled-components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Infobox = styled.div`\n  margin: 30px;\n  border-style: solid;\n  border-width: 2px;\n  border-color: gray;\n`;\n_c = Infobox;\n\nfunction AddCamp() {\n  _s();\n\n  const [name, setName] = React.useState(\"\");\n  const [locationDetail, setLocationDetail] = React.useState(\"\");\n  const [guests, setGuests] = React.useState(\"\");\n  const [stars, setStars] = React.useState(\"\");\n  const [price, setPrice] = React.useState(\"\");\n  const [comment, setComment] = React.useState(\"\");\n  const [topicTag, setTopicTag] = React.useState(\"\");\n  const [discountTag, setDiscountTag] = React.useState(\"\");\n  const [otherTag, setOtherTag] = React.useState(\"\");\n  const [commentCount, setCommentCount] = React.useState(0);\n  const [product, setProduct] = React.useState([]);\n  const [image, setImage] = React.useState(null);\n  const [address, setAddress] = React.useState(\"\");\n  const [placeId, setPlaceId] = React.useState(\"\");\n  const [latitude, setLatitude] = React.useState({});\n  const history = useHistory();\n\n  const GetAddress = addressdata => {\n    setAddress(addressdata[0]);\n    setPlaceId(addressdata[1]);\n    setLatitude(addressdata[2]);\n  }; // const OnFileChange = (e) => {\n  //   // Get Files\n  //   for (let i = 0; i < e.target.files.length; i++) {\n  //     const newFile = e.target.files[i];\n  //     const id = uuidv4();\n  //     newFile[\"id\"] = id;\n  //     setImage((prevState) => [...prevState, newFile]);\n  //   }\n  // };\n\n\n  React.useEffect(() => {\n    firebase.firestore().collection(\"product\").get().then(collectionSnapshot => {\n      const data = collectionSnapshot.docs.map(doc => {\n        return doc.data();\n      });\n      setProduct(data);\n    });\n  }, []);\n\n  function onSubmit() {\n    const documentRef = firebase.firestore().collection(\"product\").doc();\n    const imageRef = firebase.storage().ref(\"Product-image/\" + documentRef.id);\n    const metadata = {\n      contentType: image.type\n    };\n    imageRef.put(image, metadata).then(() => {\n      imageRef.getDownloadURL().then(imageURL => {\n        console.log(commentCount);\n        documentRef.set({\n          name,\n          guests,\n          stars,\n          price,\n          imageURL,\n          address,\n          placeId,\n          latitude,\n          comment,\n          commentCount,\n          topicTag,\n          discountTag,\n          otherTag // id: firebase.firestore.collection(\"product\"),\n\n        }).then(() => {\n          window.alert(\"成功新增露營地\"); // history.push(\"/\");\n        });\n      });\n    });\n  }\n\n  function renderRoom(item) {\n    return /*#__PURE__*/_jsxDEV(Infobox, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"name\",\n        children: [\"\\u9732\\u71DF\\u5730\\u540D\\u7A31\\uFF1A\", item.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location\",\n        children: [\"\\u5730\\u5740\\uFF1A\\u2332\", item.address]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"guest\",\n        children: [\"\\u5E8A\\u4F4D\\u4EBA\\u6578\\uFF1A\", item.guests, \" guests\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stars\",\n        children: [\"\\u661F\\u6578\\uFF1A\\u2605\", item.stars]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"price\",\n        children: [item.price, \"/night\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rooms__backstage\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rooms__backstage__title\",\n      children: \"\\u4E0A\\u67B6\\u9732\\u71DF\\u5730\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rooms__backstage__campaing\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          type: \"file\",\n          onChange: e => setImage(e.target.files[0]) // multiple\n          // onChange={OnFileChange}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u540D\\u7A31\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MapAutocomplete, {\n          placeaddress: GetAddress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u4EBA\\u6578\",\n          value: guests,\n          onChange: e => setGuests(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u8A55\\u5206\",\n          value: stars,\n          onChange: e => setStars(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u50F9\\u683C\",\n          value: price,\n          onChange: e => setPrice(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u4ECB\\u7D39\",\n          value: comment,\n          onChange: e => setComment(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rooms__infor\",\n        children: [\"\\u9732\\u71DF\\u6A19\\u7C64\", /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [\"\\u9732\\u71DF\\u4E3B\\u984C\\uFF1A\", /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"select\",\n            value: topicTag,\n            onChange: e => setTopicTag(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Seaview\",\n              children: \"seaview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Mountainview\",\n              children: \"Mountainview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"SwimmingPool\",\n              children: \"Swimming Pool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Barbecue\",\n              children: \"Barbecue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [\"\\u5730\\u9EDE\\u985E\\u578B\\uFF1A\", /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"select\",\n            value: discountTag,\n            onChange: e => setDiscountTag(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u61F6\\u4EBA\\u9732\\u71DF\",\n              children: \"\\u61F6\\u4EBA\\u9732\\u71DF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u89AA\\u5B50\\u9732\\u71DF\",\n              children: \"\\u89AA\\u5B50\\u9732\\u71DF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u9732\\u71DF\\u8ECA\",\n              children: \"\\u9732\\u71DF\\u8ECA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u514D\\u642D\\u5E33\\u7BF7\",\n              children: \"\\u514D\\u642D\\u5E33\\u7BF7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [\"\\u5176\\u4ED6\\u8CC7\\u8A0A\\uFF1A\", /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"select\",\n            value: otherTag,\n            onChange: e => setOtherTag(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u5927\\u8349\\u539F\",\n              children: \"\\u5927\\u8349\\u539F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u591C\\u666F\",\n              children: \"\\u591C\\u666F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u904A\\u6A02\\u8A2D\\u65BD\",\n              children: \"\\u904A\\u6A02\\u8A2D\\u65BD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u53EF\\u651C\\u5E36\\u5BF5\\u7269\",\n              children: \"\\u53EF\\u651C\\u5E36\\u5BF5\\u7269\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"send__btn\",\n      onClick: () => onSubmit(),\n      children: \"\\u9001\\u51FA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"campaing\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"campaing__title\",\n        children: \"\\u5DF2\\u4E0A\\u67B6\\u5546\\u54C1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), product.map(item => renderRoom(item))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddCamp, \"TZ4m3shRyz7vVBGiD+PAAuD6IoU=\", false, function () {\n  return [useHistory];\n});\n\n_c2 = AddCamp;\nexport default AddCamp;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Infobox\");\n$RefreshReg$(_c2, \"AddCamp\");","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/AddCamp.js"],"names":["React","firebase","useHistory","MapAutocomplete","v4","uuidv4","styled","Infobox","div","AddCamp","name","setName","useState","locationDetail","setLocationDetail","guests","setGuests","stars","setStars","price","setPrice","comment","setComment","topicTag","setTopicTag","discountTag","setDiscountTag","otherTag","setOtherTag","commentCount","setCommentCount","product","setProduct","image","setImage","address","setAddress","placeId","setPlaceId","latitude","setLatitude","history","GetAddress","addressdata","useEffect","firestore","collection","get","then","collectionSnapshot","data","docs","map","doc","onSubmit","documentRef","imageRef","storage","ref","id","metadata","contentType","type","put","getDownloadURL","imageURL","console","log","set","window","alert","renderRoom","item","e","target","files","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport firebase from \"firebase\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./AddCamp.css\";\nimport MapAutocomplete from \"./MapAutocamplete\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport styled from \"styled-components\";\n\nconst Infobox = styled.div`\n  margin: 30px;\n  border-style: solid;\n  border-width: 2px;\n  border-color: gray;\n`;\n\nfunction AddCamp() {\n  const [name, setName] = React.useState(\"\");\n  const [locationDetail, setLocationDetail] = React.useState(\"\");\n  const [guests, setGuests] = React.useState(\"\");\n  const [stars, setStars] = React.useState(\"\");\n  const [price, setPrice] = React.useState(\"\");\n  const [comment, setComment] = React.useState(\"\");\n  const [topicTag, setTopicTag] = React.useState(\"\");\n  const [discountTag, setDiscountTag] = React.useState(\"\");\n  const [otherTag, setOtherTag] = React.useState(\"\");\n  const [commentCount, setCommentCount] = React.useState(0);\n  const [product, setProduct] = React.useState([]);\n  const [image, setImage] = React.useState(null);\n  const [address, setAddress] = React.useState(\"\");\n  const [placeId, setPlaceId] = React.useState(\"\");\n  const [latitude, setLatitude] = React.useState({});\n  const history = useHistory();\n\n  const GetAddress = (addressdata) => {\n    setAddress(addressdata[0]);\n    setPlaceId(addressdata[1]);\n    setLatitude(addressdata[2]);\n  };\n\n  // const OnFileChange = (e) => {\n  //   // Get Files\n  //   for (let i = 0; i < e.target.files.length; i++) {\n  //     const newFile = e.target.files[i];\n  //     const id = uuidv4();\n  //     newFile[\"id\"] = id;\n  //     setImage((prevState) => [...prevState, newFile]);\n  //   }\n  // };\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .get()\n      .then((collectionSnapshot) => {\n        const data = collectionSnapshot.docs.map((doc) => {\n          return doc.data();\n        });\n        setProduct(data);\n      });\n  }, []);\n\n  function onSubmit() {\n    const documentRef = firebase.firestore().collection(\"product\").doc();\n    const imageRef = firebase.storage().ref(\"Product-image/\" + documentRef.id);\n    const metadata = {\n      contentType: image.type,\n    };\n    imageRef.put(image, metadata).then(() => {\n      imageRef.getDownloadURL().then((imageURL) => {\n        console.log(commentCount);\n        documentRef\n          .set({\n            name,\n            guests,\n            stars,\n            price,\n            imageURL,\n            address,\n            placeId,\n            latitude,\n            comment,\n            commentCount,\n            topicTag,\n            discountTag,\n            otherTag,\n            // id: firebase.firestore.collection(\"product\"),\n          })\n          .then(() => {\n            window.alert(\"成功新增露營地\");\n            // history.push(\"/\");\n          });\n      });\n    });\n  }\n\n  function renderRoom(item) {\n    return (\n      <Infobox>\n        <div className=\"name\">露營地名稱：{item.name}</div>\n        <div className=\"location\">地址：⌲{item.address}</div>\n\n        <div className=\"guest\">床位人數：{item.guests} guests</div>\n        <div className=\"stars\">星數：★{item.stars}</div>\n        <div className=\"price\">{item.price}/night</div>\n      </Infobox>\n    );\n  }\n\n  return (\n    <div className=\"rooms__backstage\">\n      <div className=\"rooms__backstage__title\">上架露營地</div>\n      <div className=\"rooms__backstage__campaing\">\n        <div>\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            type=\"file\"\n            onChange={(e) => setImage(e.target.files[0])}\n            // multiple\n            // onChange={OnFileChange}\n          />\n\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地名稱\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n          {/* <input\n          className=\"rooms__backstage__campaing__input\"\n          placeholder=\"露營地地點\"\n          value={locationDetail}\n          onChange={(e) => setLocationDetail(e.target.value)}\n        /> */}\n          <MapAutocomplete placeaddress={GetAddress} />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地人數\"\n            value={guests}\n            onChange={(e) => setGuests(e.target.value)}\n          />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地評分\"\n            value={stars}\n            onChange={(e) => setStars(e.target.value)}\n          />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地價格\"\n            value={price}\n            onChange={(e) => setPrice(e.target.value)}\n          />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地介紹\"\n            value={comment}\n            onChange={(e) => setComment(e.target.value)}\n          />\n        </div>\n        <div className=\"rooms__infor\">\n          露營標籤\n          <form>\n            露營主題：\n            <select\n              className=\"select\"\n              value={topicTag}\n              onChange={(e) => setTopicTag(e.target.value)}\n            >\n              <option value=\"Seaview\">seaview</option>\n              <option value=\"Mountainview\">Mountainview</option>\n              <option value=\"SwimmingPool\">Swimming Pool</option>\n              <option value=\"Barbecue\">Barbecue</option>\n            </select>\n          </form>\n          <form>\n            地點類型：\n            <select\n              className=\"select\"\n              value={discountTag}\n              onChange={(e) => setDiscountTag(e.target.value)}\n            >\n              <option value=\"懶人露營\">懶人露營</option>\n              <option value=\"親子露營\">親子露營</option>\n              <option value=\"露營車\">露營車</option>\n              <option value=\"免搭帳篷\">免搭帳篷</option>\n            </select>\n          </form>\n          <form>\n            其他資訊：\n            <select\n              className=\"select\"\n              value={otherTag}\n              onChange={(e) => setOtherTag(e.target.value)}\n            >\n              <option value=\"大草原\">大草原</option>\n              <option value=\"夜景\">夜景</option>\n              <option value=\"遊樂設施\">遊樂設施</option>\n              <option value=\"可攜帶寵物\">可攜帶寵物</option>\n            </select>\n          </form>\n        </div>\n      </div>\n      <button className=\"send__btn\" onClick={() => onSubmit()}>\n        送出\n      </button>\n      <div className=\"campaing\">\n        <div className=\"campaing__title\">已上架商品</div>\n        {product.map((item) => renderRoom(item))}\n      </div>\n    </div>\n  );\n}\n\nexport default AddCamp;\n"]},"metadata":{},"sourceType":"module"}