{"ast":null,"code":"import _objectSpread from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React from\"react\";import Map from\"./Map\";import\"./Rooms.css\";import{Link}from\"react-router-dom\";import firebase from\"firebase\";import styled from\"styled-components\";import{useParams}from\"react-router-dom\";import{BsFillHeartFill}from\"react-icons/bs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Like=styled.button(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  border: none;\\n  padding-right: 10px;\\n  padding-left: 10px;\\n  padding-top: 8px;\\n  border-radius: 50%;\\n  font-size: 20px;\\n  /* margin-left: -20px; */\\n  cursor: pointer;\\n\"])));function Rooms(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),rooms=_React$useState2[0],setRooms=_React$useState2[1];React.useEffect(function(){firebase.firestore().collection(\"product\").onSnapshot(function(collectionSnapshot){var data=collectionSnapshot.docs.map(function(docSnapshot){var id=docSnapshot.id;return _objectSpread(_objectSpread({},docSnapshot.data()),{},{id:id});});setRooms(data);console.log(data);});},[]);function renderRoom(item){var _item$collectionBy;var uid=firebase.auth().currentUser.uid;function toggleCollection(){if(isCollected){firebase.firestore().collection(\"product\").doc(item.id).update({collectionBy:firebase.firestore.FieldValue.arrayRemove(uid)});}else{firebase.firestore().collection(\"product\").doc(item.id).update({collectionBy:firebase.firestore.FieldValue.arrayUnion(uid)});}}var isCollected=(_item$collectionBy=item.collectionBy)===null||_item$collectionBy===void 0?void 0:_item$collectionBy.includes(firebase.auth().currentUser.uid);return/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__item\",children:[/*#__PURE__*/_jsx(Link,{className:\"rooms_item__link\",to:\"/products/\".concat(item.id),children:/*#__PURE__*/_jsx(\"img\",{className:\"rooms__item__img\",alt:\"room\",src:item.imageURL})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__item__location\",children:[\"\\u2332\",item.locationDetail]}),/*#__PURE__*/_jsx(\"div\",{className:\"rooms__item__title\",children:item.name}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms_item__guest\",children:[item.guests,\" guests\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__item__stars\",children:[\"\\u2605\",item.stars,/*#__PURE__*/_jsx(\"span\",{className:\"visits\",children:\" (5 comments)\"})]}),/*#__PURE__*/_jsx(Like,{onClick:toggleCollection,style:isCollected?{color:\"red\"}:{color:\"grey\"},children:/*#__PURE__*/_jsx(BsFillHeartFill,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__item__price\",children:[item.price,\"/night\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"rooms__item__heart\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"rooms\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rooms__condition__container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rooms__condition__wrapper\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"rooms__condition__items\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn__condition\",children:\"Seaview\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn__condition\",children:\"Mountainview\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn__condition\",children:\"Swimming Pool\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn__condition\",children:\"Barbecue\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"rooms__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rooms__items\",children:rooms.map(function(item){return renderRoom(item);})}),/*#__PURE__*/_jsx(\"div\",{className:\"map__wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"map\",children:/*#__PURE__*/_jsx(Map,{})})})]})})]});}export default Rooms;","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/Rooms.js"],"names":["React","Map","Link","firebase","styled","useParams","BsFillHeartFill","Like","button","Rooms","useState","rooms","setRooms","useEffect","firestore","collection","onSnapshot","collectionSnapshot","data","docs","map","docSnapshot","id","console","log","renderRoom","item","uid","auth","currentUser","toggleCollection","isCollected","doc","update","collectionBy","FieldValue","arrayRemove","arrayUnion","includes","imageURL","locationDetail","name","guests","stars","color","price"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Map from \"./Map\";\nimport \"./Rooms.css\";\nimport { Link } from \"react-router-dom\";\nimport firebase from \"firebase\";\nimport styled from \"styled-components\";\nimport { useParams } from \"react-router-dom\";\nimport { BsFillHeartFill } from \"react-icons/bs\";\n\nconst Like = styled.button`\n  border: none;\n  padding-right: 10px;\n  padding-left: 10px;\n  padding-top: 8px;\n  border-radius: 50%;\n  font-size: 20px;\n  /* margin-left: -20px; */\n  cursor: pointer;\n`;\n\nfunction Rooms() {\n  const [rooms, setRooms] = React.useState([]);\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .onSnapshot((collectionSnapshot) => {\n        const data = collectionSnapshot.docs.map((docSnapshot) => {\n          const id = docSnapshot.id;\n          return { ...docSnapshot.data(), id };\n        });\n        setRooms(data);\n        console.log(data);\n      });\n  }, []);\n\n  function renderRoom(item) {\n    const uid = firebase.auth().currentUser.uid;\n    function toggleCollection() {\n      if (isCollected) {\n        firebase\n          .firestore()\n          .collection(\"product\")\n          .doc(item.id)\n          .update({\n            collectionBy: firebase.firestore.FieldValue.arrayRemove(uid),\n          });\n      } else {\n        firebase\n          .firestore()\n          .collection(\"product\")\n          .doc(item.id)\n          .update({\n            collectionBy: firebase.firestore.FieldValue.arrayUnion(uid),\n          });\n      }\n    }\n\n    const isCollected = item.collectionBy?.includes(\n      firebase.auth().currentUser.uid\n    );\n\n    return (\n      <div className=\"rooms__item\">\n        <Link className=\"rooms_item__link\" to={`/products/${item.id}`}>\n          <img className=\"rooms__item__img\" alt=\"room\" src={item.imageURL} />\n        </Link>\n        <div className=\"box\">\n          <div className=\"rooms__item__location\">⌲{item.locationDetail}</div>\n          <div className=\"rooms__item__title\">{item.name}</div>\n          <hr />\n          <div className=\"rooms_item__guest\">{item.guests} guests</div>\n          <div className=\"rooms__item__stars\">\n            ★{item.stars}\n            <span className=\"visits\"> (5 comments)</span>\n          </div>\n          <Like\n            onClick={toggleCollection}\n            style={isCollected ? { color: \"red\" } : { color: \"grey\" }}\n          >\n            <BsFillHeartFill />\n          </Like>\n          {/* <div className=\"rooms__item__like\">like:{props.like}</div> */}\n          <div className=\"rooms__item__price\">{item.price}/night</div>\n          <div className=\"rooms__item__heart\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"rooms\">\n      {}\n      <div className=\"rooms__condition__container\">\n        <div className=\"rooms__condition__wrapper\">\n          <ul className=\"rooms__condition__items\">\n            <button className=\"btn__condition\">Seaview</button>\n            <button className=\"btn__condition\">Mountainview</button>\n            <button className=\"btn__condition\">Swimming Pool</button>\n            <button className=\"btn__condition\">Barbecue</button>\n          </ul>\n        </div>\n      </div>\n      <div className=\"rooms__container\">\n        <div className=\"rooms__wrapper\">\n          <div className=\"rooms__items\">\n            {rooms.map((item) => renderRoom(item))}\n          </div>\n          <div className=\"map__wrapper\">\n            <div className=\"map\">\n              <Map />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Rooms;\n"]},"metadata":{},"sourceType":"module"}