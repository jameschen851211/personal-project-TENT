{"ast":null,"code":"import _toConsumableArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useState}from\"react\";import\"./RoomDetail.css\";import{useParams,useRouteMatch,useHistory}from\"react-router-dom\";import p9 from\"../imge/img-9.jpeg\";import MapProductDetail from\"./MapProductDetail\";import firebase from\"firebase\";import styled from\"styled-components\";import{BsFillHeartFill}from\"react-icons/bs\";import DateRangePickerExample from\"./DateRangePickExample\";import CountNumber from\"./\bCountNumber\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Like=styled.button(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  border: none;\\n  padding-right: 10px;\\n  padding-left: 10px;\\n  padding-top: 8px;\\n  border-radius: 50%;\\n  font-size: 20px;\\n  margin-left: 20px;\\n  cursor: pointer;\\n\"])));var CuntDate=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin-top: 20px;\\n\"])));function RoomDetail(){var _item$collectionBy;var _useParams=useParams(),itemID=_useParams.itemID;var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),item=_React$useState2[0],setItem=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),startDate=_React$useState4[0],setStartDate=_React$useState4[1];var _React$useState5=React.useState(),_React$useState6=_slicedToArray(_React$useState5,2),endDate=_React$useState6[0],setEndDate=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),count=_React$useState8[0],setCount=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),comment=_React$useState10[0],setComment=_React$useState10[1];var _useRouteMatch=useRouteMatch(),url=_useRouteMatch.url;var history=useHistory();// const [count, setCount] = useState(0);\nReact.useEffect(function(){firebase.firestore().collection(\"product\").doc(itemID).onSnapshot(function(docSnapshot){var data=docSnapshot.data();setItem(data);});// .get()\n// .then((docSnapshot) => {\n//   const data = docSnapshot.data();\n//   setItem(data);\n// });\n},[]);React.useEffect(function(){console.log(\"h1\");firebase.firestore().collection(\"comment\").where(\"itemID\",\"==\",itemID).get().then(function(snapshot){console.log(typeof snapshot);snapshot.forEach(function(doc){var data=doc.data();console.log(data);setComment(function(comment){return[].concat(_toConsumableArray(comment),[data]);});});});},[]);function toggleCollection(){var uid=firebase.auth().currentUser.uid;if(isCollected){firebase.firestore().collection(\"product\").doc(itemID).update({collectionBy:firebase.firestore.FieldValue.arrayRemove(uid)});}else{firebase.firestore().collection(\"product\").doc(itemID).update({collectionBy:firebase.firestore.FieldValue.arrayUnion(uid)});}}var isCollected=(_item$collectionBy=item.collectionBy)===null||_item$collectionBy===void 0?void 0:_item$collectionBy.includes(firebase.auth().currentUser.uid);function onSubmit(){// const documentRef = firebase.firestore().collection(\"order\").doc();\nvar orderID=firebase.firestore().collection(\"order\").doc().id;firebase.firestore().collection(\"order\").doc(orderID).set({startDate:startDate,endDate:endDate,uid:firebase.auth().currentUser.uid,id:itemID,count:count}).then(function(){history.push(\"\".concat(url,\"/order/\").concat(orderID));});// documentRef\n//   .set({\n//     startDate,\n//     endDate,\n//     uid: firebase.auth().currentUser.uid,\n//     id: itemID,\n//   })\n//   .then((doc) => {\n//     console.log(doc);\n//     // history.push(`${url}/order`);\n//   });\n}return/*#__PURE__*/_jsx(\"div\",{className:\"rooms__detail__container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rooms__detail__wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__detail__introduce\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__detail__box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rooms__detail__name\",children:item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__name__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__detail__stars\",children:[\"\\u2605\",item.stars,\" (5 comments)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__detail__location\",children:[\"\\u2332\",item.locationDetail]}),/*#__PURE__*/_jsx(Like,{onClick:toggleCollection,style:isCollected?{color:\"red\"}:{color:\"grey\"},children:/*#__PURE__*/_jsx(BsFillHeartFill,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__detail__carousel\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"carousel__img\",alt:\"carousel img\",src:item.imageURL}),/*#__PURE__*/_jsx(\"img\",{className:\"carousel__img\",alt:\"carousel img\",src:item.imageURL}),/*#__PURE__*/_jsx(\"img\",{className:\"carousel__img\",alt:\"carousel img\",src:item.imageURL})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__owner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rooms__owner__detail__name\",children:\"Hosted by Victor Chen\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__stick\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__owner__detail\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"rooms__owner__contact__btn\",children:\"Contact owner\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rooms__owner__introduce\",children:item.comment})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rooms__detail__check\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__detail__check__box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__box__price\",children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"div\",{className:\"rooms__box__date\",children:/*#__PURE__*/_jsx(DateRangePickerExample,{startDate:startDate,setStartDate:setStartDate,endDate:endDate,setEndDate:setEndDate})}),/*#__PURE__*/_jsx(CuntDate,{children:/*#__PURE__*/_jsx(CountNumber,{count:count,setCount:setCount})}),/*#__PURE__*/_jsx(\"button\",{className:\"rooms__box__btn__instant__book\"// history.push(`${url}/order`)\n,onClick:function onClick(){return onSubmit();},children:\"Instant book\"})]})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Equipment\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Campsite__area\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Campsite area\"}),/*#__PURE__*/_jsx(\"div\",{className:\"area__point\",children:\"Park at listing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"area__point\",children:\"Canvas tent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Essentials\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Essentials\"}),/*#__PURE__*/_jsx(\"div\",{className:\"essentials__point\",children:\"Pets allowed\"}),/*#__PURE__*/_jsx(\"div\",{className:\"essentials__point\",children:\"Campfires allowed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Amenities\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Amenities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"amenities__point\",children:\"No wifi\"}),/*#__PURE__*/_jsx(\"div\",{className:\"amenities__point\",children:\"Pack out\"}),/*#__PURE__*/_jsx(\"div\",{className:\"amenities__point\",children:\"Showers\"}),/*#__PURE__*/_jsx(\"div\",{className:\"amenities__point\",children:\"Potable water\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"details__title\",children:\"Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"details__info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"details__points\",children:\"Check in:After 3PM\"}),/*#__PURE__*/_jsx(\"div\",{className:\"details__points\",children:\"Check out:Before 12PM\"}),/*#__PURE__*/_jsx(\"div\",{className:\"details__points\",children:\"On arrival: Meet and greet\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Activities\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"activities__title\",children:\"Activities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__sub__title\",children:\"Offered on the Host's property or nearby.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"activities__box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Biking\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Boating\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Hiking\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Padding\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"activities__points\",children:/*#__PURE__*/_jsx(\"div\",{className:\"activities__points__name\",children:\"Swimming\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Reviews\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reviews__title\",children:\"100 Reviews\"}),comment.map(function(data,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__box\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"reviewer__img\",alt:\"reviewer\",src:p9}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer__stars\",children:[\"\\u2605\",data.rating]}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__name\",children:\"Victor\"}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__comment\",children:data.review}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__date\",children:\"2021/11/2\"})]})]},index);}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__box\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"reviewer__img\",alt:\"reviewer\",src:p9}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer__info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__stars\",children:\"\\u26054.5\"}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__name\",children:\"Jane\"}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__comment\",children:\"This was exactly what we had hoped for...off the grid and disconnected. The hosts were friendly and it was unbelievably quiet. The only recommendation I would have is a new shower liner. I would absolutely book again!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"reviewer__date\",children:\"2021/11/2\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"porduct__detail__map\",children:/*#__PURE__*/_jsx(MapProductDetail,{})})]})})});}export default RoomDetail;","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/RoomDetail.js"],"names":["React","useState","useParams","useRouteMatch","useHistory","p9","MapProductDetail","firebase","styled","BsFillHeartFill","DateRangePickerExample","CountNumber","Link","Like","button","CuntDate","div","RoomDetail","itemID","item","setItem","startDate","setStartDate","endDate","setEndDate","count","setCount","comment","setComment","url","history","useEffect","firestore","collection","doc","onSnapshot","docSnapshot","data","console","log","where","get","then","snapshot","forEach","toggleCollection","uid","auth","currentUser","isCollected","update","collectionBy","FieldValue","arrayRemove","arrayUnion","includes","onSubmit","orderID","id","set","push","name","stars","locationDetail","color","imageURL","price","map","index","rating","review"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport \"./RoomDetail.css\";\nimport { useParams, useRouteMatch, useHistory } from \"react-router-dom\";\nimport p9 from \"../imge/img-9.jpeg\";\nimport MapProductDetail from \"./MapProductDetail\";\nimport firebase from \"firebase\";\nimport styled from \"styled-components\";\nimport { BsFillHeartFill } from \"react-icons/bs\";\nimport DateRangePickerExample from \"./DateRangePickExample\";\nimport CountNumber from \"./\bCountNumber\";\nimport { Link } from \"react-router-dom\";\n\nconst Like = styled.button`\n  border: none;\n  padding-right: 10px;\n  padding-left: 10px;\n  padding-top: 8px;\n  border-radius: 50%;\n  font-size: 20px;\n  margin-left: 20px;\n  cursor: pointer;\n`;\n\nconst CuntDate = styled.div`\n  margin-top: 20px;\n`;\n\nfunction RoomDetail() {\n  const { itemID } = useParams();\n  const [item, setItem] = React.useState({});\n  const [startDate, setStartDate] = React.useState();\n  const [endDate, setEndDate] = React.useState();\n  const [count, setCount] = React.useState(0);\n  const [comment, setComment] = React.useState([]);\n  const { url } = useRouteMatch();\n  const history = useHistory();\n\n  // const [count, setCount] = useState(0);\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .doc(itemID)\n      .onSnapshot((docSnapshot) => {\n        const data = docSnapshot.data();\n        setItem(data);\n      });\n    // .get()\n    // .then((docSnapshot) => {\n    //   const data = docSnapshot.data();\n    //   setItem(data);\n    // });\n  }, []);\n\n  React.useEffect(() => {\n    console.log(\"h1\");\n    firebase\n      .firestore()\n      .collection(\"comment\")\n      .where(\"itemID\", \"==\", itemID)\n      .get()\n      .then((snapshot) => {\n        console.log(typeof snapshot);\n        snapshot.forEach((doc) => {\n          const data = doc.data();\n          console.log(data);\n          setComment((comment) => [...comment, data]);\n        });\n      });\n  }, []);\n\n  function toggleCollection() {\n    const uid = firebase.auth().currentUser.uid;\n    if (isCollected) {\n      firebase\n        .firestore()\n        .collection(\"product\")\n        .doc(itemID)\n        .update({\n          collectionBy: firebase.firestore.FieldValue.arrayRemove(uid),\n        });\n    } else {\n      firebase\n        .firestore()\n        .collection(\"product\")\n        .doc(itemID)\n        .update({\n          collectionBy: firebase.firestore.FieldValue.arrayUnion(uid),\n        });\n    }\n  }\n\n  const isCollected = item.collectionBy?.includes(\n    firebase.auth().currentUser.uid\n  );\n\n  function onSubmit() {\n    // const documentRef = firebase.firestore().collection(\"order\").doc();\n    const orderID = firebase.firestore().collection(\"order\").doc().id;\n    firebase\n      .firestore()\n      .collection(\"order\")\n      .doc(orderID)\n      .set({\n        startDate,\n        endDate,\n        uid: firebase.auth().currentUser.uid,\n        id: itemID,\n        count,\n      })\n      .then(() => {\n        history.push(`${url}/order/${orderID}`);\n      });\n    // documentRef\n    //   .set({\n    //     startDate,\n    //     endDate,\n    //     uid: firebase.auth().currentUser.uid,\n    //     id: itemID,\n    //   })\n    //   .then((doc) => {\n    //     console.log(doc);\n    //     // history.push(`${url}/order`);\n    //   });\n  }\n\n  return (\n    <div className=\"rooms__detail__container\">\n      <div className=\"rooms__detail__wrapper\">\n        <div className=\"rooms__detail__introduce\">\n          <div className=\"rooms__detail__box\">\n            <div className=\"rooms__detail__name\">{item.name}</div>\n            <div className=\"rooms__name__info\">\n              <div className=\"rooms__detail__stars\">\n                ★{item.stars} (5 comments)\n              </div>\n              <div className=\"rooms__detail__location\">\n                ⌲{item.locationDetail}\n              </div>\n              <Like\n                onClick={toggleCollection}\n                style={isCollected ? { color: \"red\" } : { color: \"grey\" }}\n              >\n                <BsFillHeartFill />\n              </Like>\n            </div>\n            <div className=\"rooms__detail__carousel\">\n              <img\n                className=\"carousel__img\"\n                alt=\"carousel img\"\n                src={item.imageURL}\n              />\n              <img\n                className=\"carousel__img\"\n                alt=\"carousel img\"\n                src={item.imageURL}\n              />\n              <img\n                className=\"carousel__img\"\n                alt=\"carousel img\"\n                src={item.imageURL}\n              />\n            </div>\n            <div className=\"rooms__owner\">\n              <div className=\"rooms__owner__detail__name\">\n                Hosted by Victor Chen\n              </div>\n              <div className=\"rooms__stick\">\n                <div className=\"rooms__owner__detail\">\n                  <button className=\"rooms__owner__contact__btn\">\n                    Contact owner\n                  </button>\n                  <div className=\"rooms__owner__introduce\">{item.comment}</div>\n                </div>\n                <div className=\"rooms__detail__check\">\n                  <div className=\"rooms__detail__check__box\">\n                    <div className=\"rooms__box__price\">${item.price}</div>\n                    <div className=\"rooms__box__date\">\n                      <DateRangePickerExample\n                        startDate={startDate}\n                        setStartDate={setStartDate}\n                        endDate={endDate}\n                        setEndDate={setEndDate}\n                      />\n                      {/* <input className=\"checkin\" placeholder=\"Check in\" />\n                      <input className=\"checkout\" placeholder=\"Check out\" /> */}\n                    </div>\n                    <CuntDate>\n                      <CountNumber count={count} setCount={setCount} />\n                    </CuntDate>\n                    <button\n                      className=\"rooms__box__btn__instant__book\"\n                      // history.push(`${url}/order`)\n                      onClick={() => onSubmit()}\n                    >\n                      Instant book\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"Equipment\">\n            <div className=\"Campsite__area\">\n              <div className=\"title\">Campsite area</div>\n              <div className=\"area__point\">Park at listing</div>\n              <div className=\"area__point\">Canvas tent</div>\n            </div>\n            <div className=\"Essentials\">\n              <div className=\"title\">Essentials</div>\n\n              <div className=\"essentials__point\">Pets allowed</div>\n              <div className=\"essentials__point\">Campfires allowed</div>\n            </div>\n            <div className=\"Amenities\">\n              <div className=\"title\">Amenities</div>\n\n              <div className=\"amenities__point\">No wifi</div>\n              <div className=\"amenities__point\">Pack out</div>\n              <div className=\"amenities__point\">Showers</div>\n              <div className=\"amenities__point\">Potable water</div>\n            </div>\n          </div>\n          <div className=\"Details\">\n            <div className=\"details__title\">Details</div>\n            <div className=\"details__info\">\n              <div className=\"details__points\">Check in:After 3PM</div>\n              <div className=\"details__points\">Check out:Before 12PM</div>\n              <div className=\"details__points\">On arrival: Meet and greet</div>\n            </div>\n          </div>\n          <div className=\"Activities\">\n            <div className=\"activities__title\">Activities</div>\n            <div className=\"activities__sub__title\">\n              Offered on the Host's property or nearby.\n            </div>\n            <div className=\"activities__box\">\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Biking</div>\n              </div>\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Boating</div>\n              </div>\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Hiking</div>\n              </div>\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Padding</div>\n              </div>\n              <div className=\"activities__points\">\n                <div className=\"activities__points__name\">Swimming</div>\n              </div>\n            </div>\n          </div>\n          <div className=\"Reviews\">\n            <div className=\"reviews__title\">100 Reviews</div>\n            {comment.map((data, index) => {\n              return (\n                <div className=\"reviews__box\" key={index}>\n                  <img className=\"reviewer__img\" alt=\"reviewer\" src={p9} />\n                  <div className=\"reviewer__info\">\n                    <div className=\"reviewer__stars\">★{data.rating}</div>\n                    <div className=\"reviewer__name\">Victor</div>\n                    <div className=\"reviewer__comment\">{data.review}</div>\n                    <div className=\"reviewer__date\">2021/11/2</div>\n                  </div>\n                </div>\n              );\n            })}\n\n            <div className=\"reviews__box\">\n              <img className=\"reviewer__img\" alt=\"reviewer\" src={p9} />\n              <div className=\"reviewer__info\">\n                <div className=\"reviewer__stars\">★4.5</div>\n                <div className=\"reviewer__name\">Jane</div>\n                <div className=\"reviewer__comment\">\n                  This was exactly what we had hoped for...off the grid and\n                  disconnected. The hosts were friendly and it was unbelievably\n                  quiet. The only recommendation I would have is a new shower\n                  liner. I would absolutely book again!\n                </div>\n                <div className=\"reviewer__date\">2021/11/2</div>\n                {/* <img className=\"reviewer__photo\" alt=\"p\" src={p9} /> */}\n              </div>\n            </div>\n          </div>\n          <div className=\"porduct__detail__map\">\n            <MapProductDetail />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default RoomDetail;\n"]},"metadata":{},"sourceType":"module"}