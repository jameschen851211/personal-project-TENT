{"ast":null,"code":"import _slicedToArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React from\"react\";import Popup from\"reactjs-popup\";import\"./PopupButton.css\";import StarRating from\"./StarRating\";import firebase from\"firebase\";import styled from\"styled-components\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TripsCardEvaluate=styled.button(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 70px;\\n  height: 30px;\\n  color: white;\\n  border: none;\\n  background-color: #fbba05;\\n  margin-top: 30px;\\n  font-weight: bold;\\n  cursor: pointer;\\n  border-radius: 4px;\\n\"])));function PopupIsCommented(props){var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),review=_React$useState2[0],setReview=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),comment=_React$useState4[0],setComment=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),selection=_React$useState6[0],setSelection=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),rating=_React$useState8[0],setRating=_React$useState8[1];React.useEffect(function(){// console.log(firebase.auth().currentUser.uid);\nfirebase.firestore().collection(\"comment\").where(\"uid\",\"==\",firebase.auth().currentUser.uid).where(\"itemID\",\"==\",props.itemID).get().then(function(querySnapshot){querySnapshot.forEach(function(doc){console.log(doc.data());setComment(doc.data());});});},[]);return/*#__PURE__*/_jsx(Popup,{trigger:/*#__PURE__*/_jsx(TripsCardEvaluate,{children:\" \\u67E5\\u770B\\u8A55\\u8AD6 \"}),modal:true,nested:true,children:comment?function(close){return/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close\",onClick:close,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:\" \\u67E5\\u770B\\u8A55\\u8AD6 \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"content-input\",children:[\"Stars:\",/*#__PURE__*/_jsx(StarRating,{setSelection:setSelection,setRating:setRating,selection:selection,rating:parseInt(comment.rating,10)})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-input\",children:[\"Reviews:\",comment.review]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\"})]});}:\"\"});}export default PopupIsCommented;","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/PopupIsCommented.js"],"names":["React","Popup","StarRating","firebase","styled","TripsCardEvaluate","button","PopupIsCommented","props","useState","review","setReview","comment","setComment","selection","setSelection","rating","setRating","useEffect","firestore","collection","where","auth","currentUser","uid","itemID","get","then","querySnapshot","forEach","doc","console","log","data","close","parseInt"],"mappings":"gSAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAO,mBAAP,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,C,wFAEA,GAAMC,CAAAA,iBAAiB,CAAGD,MAAM,CAACE,MAAV,0PAAvB,CAYA,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,CAC/B,oBAA4BR,KAAK,CAACS,QAAN,EAA5B,oDAAOC,MAAP,qBAAeC,SAAf,qBACA,qBAA8BX,KAAK,CAACS,QAAN,EAA9B,qDAAOG,OAAP,qBAAgBC,UAAhB,qBACA,qBAAkCb,KAAK,CAACS,QAAN,CAAe,CAAf,CAAlC,qDAAOK,SAAP,qBAAkBC,YAAlB,qBACA,qBAA4Bf,KAAK,CAACS,QAAN,CAAe,CAAf,CAA5B,qDAAOO,MAAP,qBAAeC,SAAf,qBAEAjB,KAAK,CAACkB,SAAN,CAAgB,UAAM,CACpB;AACAf,QAAQ,CACLgB,SADH,GAEGC,UAFH,CAEc,SAFd,EAGGC,KAHH,CAGS,KAHT,CAGgB,IAHhB,CAGsBlB,QAAQ,CAACmB,IAAT,GAAgBC,WAAhB,CAA4BC,GAHlD,EAIGH,KAJH,CAIS,QAJT,CAImB,IAJnB,CAIyBb,KAAK,CAACiB,MAJ/B,EAKGC,GALH,GAMGC,IANH,CAMQ,SAACC,aAAD,CAAmB,CACvBA,aAAa,CAACC,OAAd,CAAsB,SAACC,GAAD,CAAS,CAC7BC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAJ,EAAZ,EACApB,UAAU,CAACiB,GAAG,CAACG,IAAJ,EAAD,CAAV,CACD,CAHD,EAID,CAXH,EAYD,CAdD,CAcG,EAdH,EAgBA,mBACE,KAAC,KAAD,EACE,OAAO,cAAE,KAAC,iBAAD,yCADX,CAEE,KAAK,KAFP,CAGE,MAAM,KAHR,UAKGrB,OAAO,CACJ,SAACsB,KAAD,qBACE,aAAK,SAAS,CAAC,OAAf,wBACE,eAAQ,SAAS,CAAC,OAAlB,CAA0B,OAAO,CAAEA,KAAnC,kBADF,cAIE,YAAK,SAAS,CAAC,QAAf,wCAJF,cAKE,aAAK,SAAS,CAAC,SAAf,WACG,GADH,cAEE,aAAK,SAAS,CAAC,eAAf,iCAEE,KAAC,UAAD,EACE,YAAY,CAAEnB,YADhB,CAEE,SAAS,CAAEE,SAFb,CAGE,SAAS,CAAEH,SAHb,CAIE,MAAM,CAAEqB,QAAQ,CAACvB,OAAO,CAACI,MAAT,CAAiB,EAAjB,CAJlB,EAFF,GAFF,cAWE,aAXF,cAYE,aAAK,SAAS,CAAC,eAAf,sBAEGJ,OAAO,CAACF,MAFX,GAZF,GALF,cAsBE,YAAK,SAAS,CAAC,SAAf,EAtBF,GADF,EADI,CA2BJ,EAhCN,EADF,CAoCD,CAED,cAAeH,CAAAA,gBAAf","sourcesContent":["import React from \"react\";\nimport Popup from \"reactjs-popup\";\nimport \"./PopupButton.css\";\nimport StarRating from \"./StarRating\";\nimport firebase from \"firebase\";\nimport styled from \"styled-components\";\n\nconst TripsCardEvaluate = styled.button`\n  width: 70px;\n  height: 30px;\n  color: white;\n  border: none;\n  background-color: #fbba05;\n  margin-top: 30px;\n  font-weight: bold;\n  cursor: pointer;\n  border-radius: 4px;\n`;\n\nfunction PopupIsCommented(props) {\n  const [review, setReview] = React.useState();\n  const [comment, setComment] = React.useState();\n  const [selection, setSelection] = React.useState(0);\n  const [rating, setRating] = React.useState(0);\n\n  React.useEffect(() => {\n    // console.log(firebase.auth().currentUser.uid);\n    firebase\n      .firestore()\n      .collection(\"comment\")\n      .where(\"uid\", \"==\", firebase.auth().currentUser.uid)\n      .where(\"itemID\", \"==\", props.itemID)\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          console.log(doc.data());\n          setComment(doc.data());\n        });\n      });\n  }, []);\n\n  return (\n    <Popup\n      trigger={<TripsCardEvaluate> 查看評論 </TripsCardEvaluate>}\n      modal\n      nested\n    >\n      {comment\n        ? (close) => (\n            <div className=\"modal\">\n              <button className=\"close\" onClick={close}>\n                &times;\n              </button>\n              <div className=\"header\"> 查看評論 </div>\n              <div className=\"content\">\n                {\" \"}\n                <div className=\"content-input\">\n                  Stars:\n                  <StarRating\n                    setSelection={setSelection}\n                    setRating={setRating}\n                    selection={selection}\n                    rating={parseInt(comment.rating, 10)}\n                  />\n                </div>\n                <br />\n                <div className=\"content-input\">\n                  Reviews:\n                  {comment.review}\n                </div>\n              </div>\n              <div className=\"actions\"></div>\n            </div>\n          )\n        : \"\"}\n    </Popup>\n  );\n}\n\nexport default PopupIsCommented;\n"]},"metadata":{},"sourceType":"module"}