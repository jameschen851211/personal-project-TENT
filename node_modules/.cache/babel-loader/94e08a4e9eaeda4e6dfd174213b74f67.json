{"ast":null,"code":"var _jsxFileName = \"/Users/victorchen/Desktop/react-test/my-app/src/components/AddCamp.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport firebase from \"firebase\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./AddCamp.css\";\nimport MapAutocomplete from \"./MapAutocamplete\";\nimport styled from \"styled-components\";\nimport { RiDeleteBin2Line } from \"react-icons/ri\";\nimport PopupEditData from \"./PopupEditData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Infobox = styled.div`\n  margin: 30px;\n  padding: 30px;\n  width: 90%;\n  border-style: solid;\n  border-width: 1px;\n  border-color: gray;\n  border-radius: 10px;\n  display: flex;\n`;\n_c = Infobox;\nconst Info = styled.div`\n  margin-right: 20px;\n`;\n_c2 = Info;\nconst Delete = styled.button`\n  font-size: 20px;\n  border-style: none;\n  background-color: white;\n  cursor: pointer;\n  &:hover {\n    color: red;\n  }\n`;\n_c3 = Delete;\n\nfunction AddCamp() {\n  _s();\n\n  const [name, setName] = React.useState(\"\");\n  const [locationDetail, setLocationDetail] = React.useState(\"\");\n  const [guests, setGuests] = React.useState(\"\");\n  const [stars, setStars] = React.useState(\"\");\n  const [price, setPrice] = React.useState(\"\");\n  const [comment, setComment] = React.useState(\"\");\n  const [topicTag, setTopicTag] = React.useState(\"\");\n  const [discountTag, setDiscountTag] = React.useState(\"\");\n  const [otherTag, setOtherTag] = React.useState(\"\");\n  const [commentCount, setCommentCount] = React.useState(0);\n  const [product, setProduct] = React.useState([]);\n  const [image, setImage] = React.useState(null);\n  const [address, setAddress] = React.useState(\"\");\n  const [placeId, setPlaceId] = React.useState(\"\");\n  const [latitude, setLatitude] = React.useState({});\n  const history = useHistory();\n\n  const GetAddress = addressdata => {\n    setAddress(addressdata[0]);\n    setPlaceId(addressdata[1]);\n    setLatitude(addressdata[2]);\n  }; // const OnFileChange = (e) => {\n  //   // Get Files\n  //   for (let i = 0; i < e.target.files.length; i++) {\n  //     const newFile = e.target.files[i];\n  //     const id = uuidv4();\n  //     newFile[\"id\"] = id;\n  //     setImage((prevState) => [...prevState, newFile]);\n  //   }\n  // };\n\n\n  React.useEffect(() => {\n    firebase.firestore().collection(\"product\").onSnapshot(collectionSnapshot => {\n      const data = collectionSnapshot.docs.map(doc => {\n        const id = doc.id;\n        return { ...doc.data(),\n          id\n        };\n      });\n      setProduct(data);\n    });\n  }, []);\n\n  function onSubmit() {\n    const documentRef = firebase.firestore().collection(\"product\").doc();\n    const imageRef = firebase.storage().ref(\"Product-image/\" + documentRef.id);\n    const metadata = {\n      contentType: image.type\n    };\n    imageRef.put(image, metadata).then(() => {\n      imageRef.getDownloadURL().then(imageURL => {\n        console.log(commentCount);\n        documentRef.set({\n          name,\n          guests,\n          stars,\n          price,\n          imageURL,\n          address,\n          placeId,\n          latitude,\n          comment,\n          commentCount,\n          topicTag,\n          discountTag,\n          otherTag // id: firebase.firestore.collection(\"product\"),\n\n        }).then(() => {\n          window.alert(\"成功新增露營地\"); // history.push(\"/\");\n        });\n      });\n    });\n  }\n\n  function renderRoom(item) {\n    return /*#__PURE__*/_jsxDEV(Infobox, {\n      children: [/*#__PURE__*/_jsxDEV(Info, {\n        children: [\"\\u9732\\u71DF\\u5730\\u540D\\u7A31\\uFF1A\", item.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Info, {\n        children: [\"\\u5730\\u5740\\uFF1A\\u2332\", item.address]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Info, {\n        children: [\"\\u5E8A\\u4F4D\\u4EBA\\u6578\\uFF1A\", item.guests, \" guests\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Info, {\n        children: [\"NT.\", item.price, \"/night\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PopupEditData, {\n        item: item\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Delete, {\n        onClick: () => {\n          deleteroom(item.id);\n        },\n        children: /*#__PURE__*/_jsxDEV(RiDeleteBin2Line, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this);\n  }\n\n  function deleteroom(item) {\n    firebase.firestore().collection(\"product\").doc(item).delete().then(error => {\n      alert(\"成功刪除\");\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rooms__backstage\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rooms__backstage__title\",\n      children: \"\\u4E0A\\u67B6\\u9732\\u71DF\\u5730\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rooms__backstage__campaing\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          type: \"file\",\n          onChange: e => setImage(e.target.files[0]) // multiple\n          // onChange={OnFileChange}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u540D\\u7A31\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MapAutocomplete, {\n          placeaddress: GetAddress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u4EBA\\u6578\",\n          value: guests,\n          onChange: e => setGuests(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u8A55\\u5206\",\n          value: stars,\n          onChange: e => setStars(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u50F9\\u683C\",\n          value: price,\n          onChange: e => setPrice(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"rooms__backstage__campaing__input\",\n          placeholder: \"\\u9732\\u71DF\\u5730\\u4ECB\\u7D39\",\n          value: comment,\n          onChange: e => setComment(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rooms__infor\",\n        children: [\"\\u9732\\u71DF\\u6A19\\u7C64\", /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [\"\\u9732\\u71DF\\u4E3B\\u984C\\uFF1A\", /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"select\",\n            value: topicTag,\n            onChange: e => setTopicTag(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Seaview\",\n              children: \"seaview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Mountainview\",\n              children: \"Mountainview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"SwimmingPool\",\n              children: \"Swimming Pool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Barbecue\",\n              children: \"Barbecue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [\"\\u5730\\u9EDE\\u985E\\u578B\\uFF1A\", /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"select\",\n            value: discountTag,\n            onChange: e => setDiscountTag(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u61F6\\u4EBA\\u9732\\u71DF\",\n              children: \"\\u61F6\\u4EBA\\u9732\\u71DF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u89AA\\u5B50\\u9732\\u71DF\",\n              children: \"\\u89AA\\u5B50\\u9732\\u71DF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u9732\\u71DF\\u8ECA\",\n              children: \"\\u9732\\u71DF\\u8ECA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u514D\\u642D\\u5E33\\u7BF7\",\n              children: \"\\u514D\\u642D\\u5E33\\u7BF7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [\"\\u5176\\u4ED6\\u8CC7\\u8A0A\\uFF1A\", /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"select\",\n            value: otherTag,\n            onChange: e => setOtherTag(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u5927\\u8349\\u539F\",\n              children: \"\\u5927\\u8349\\u539F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u591C\\u666F\",\n              children: \"\\u591C\\u666F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u904A\\u6A02\\u8A2D\\u65BD\",\n              children: \"\\u904A\\u6A02\\u8A2D\\u65BD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\\u53EF\\u651C\\u5E36\\u5BF5\\u7269\",\n              children: \"\\u53EF\\u651C\\u5E36\\u5BF5\\u7269\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send__btn\",\n          onClick: () => onSubmit(),\n          children: \"\\u9001\\u51FA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"campaing\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rooms__backstage__title\",\n        children: \"\\u5DF2\\u4E0A\\u67B6\\u5546\\u54C1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), product.map(item => renderRoom(item))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddCamp, \"TZ4m3shRyz7vVBGiD+PAAuD6IoU=\", false, function () {\n  return [useHistory];\n});\n\n_c4 = AddCamp;\nexport default AddCamp;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Infobox\");\n$RefreshReg$(_c2, \"Info\");\n$RefreshReg$(_c3, \"Delete\");\n$RefreshReg$(_c4, \"AddCamp\");","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/AddCamp.js"],"names":["React","firebase","useHistory","MapAutocomplete","styled","RiDeleteBin2Line","PopupEditData","Infobox","div","Info","Delete","button","AddCamp","name","setName","useState","locationDetail","setLocationDetail","guests","setGuests","stars","setStars","price","setPrice","comment","setComment","topicTag","setTopicTag","discountTag","setDiscountTag","otherTag","setOtherTag","commentCount","setCommentCount","product","setProduct","image","setImage","address","setAddress","placeId","setPlaceId","latitude","setLatitude","history","GetAddress","addressdata","useEffect","firestore","collection","onSnapshot","collectionSnapshot","data","docs","map","doc","id","onSubmit","documentRef","imageRef","storage","ref","metadata","contentType","type","put","then","getDownloadURL","imageURL","console","log","set","window","alert","renderRoom","item","deleteroom","delete","error","e","target","files","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport firebase from \"firebase\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./AddCamp.css\";\nimport MapAutocomplete from \"./MapAutocamplete\";\nimport styled from \"styled-components\";\nimport { RiDeleteBin2Line } from \"react-icons/ri\";\nimport PopupEditData from \"./PopupEditData\";\n\nconst Infobox = styled.div`\n  margin: 30px;\n  padding: 30px;\n  width: 90%;\n  border-style: solid;\n  border-width: 1px;\n  border-color: gray;\n  border-radius: 10px;\n  display: flex;\n`;\n\nconst Info = styled.div`\n  margin-right: 20px;\n`;\n\nconst Delete = styled.button`\n  font-size: 20px;\n  border-style: none;\n  background-color: white;\n  cursor: pointer;\n  &:hover {\n    color: red;\n  }\n`;\n\nfunction AddCamp() {\n  const [name, setName] = React.useState(\"\");\n  const [locationDetail, setLocationDetail] = React.useState(\"\");\n  const [guests, setGuests] = React.useState(\"\");\n  const [stars, setStars] = React.useState(\"\");\n  const [price, setPrice] = React.useState(\"\");\n  const [comment, setComment] = React.useState(\"\");\n  const [topicTag, setTopicTag] = React.useState(\"\");\n  const [discountTag, setDiscountTag] = React.useState(\"\");\n  const [otherTag, setOtherTag] = React.useState(\"\");\n  const [commentCount, setCommentCount] = React.useState(0);\n  const [product, setProduct] = React.useState([]);\n  const [image, setImage] = React.useState(null);\n  const [address, setAddress] = React.useState(\"\");\n  const [placeId, setPlaceId] = React.useState(\"\");\n  const [latitude, setLatitude] = React.useState({});\n  const history = useHistory();\n\n  const GetAddress = (addressdata) => {\n    setAddress(addressdata[0]);\n    setPlaceId(addressdata[1]);\n    setLatitude(addressdata[2]);\n  };\n\n  // const OnFileChange = (e) => {\n  //   // Get Files\n  //   for (let i = 0; i < e.target.files.length; i++) {\n  //     const newFile = e.target.files[i];\n  //     const id = uuidv4();\n  //     newFile[\"id\"] = id;\n  //     setImage((prevState) => [...prevState, newFile]);\n  //   }\n  // };\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .onSnapshot((collectionSnapshot) => {\n        const data = collectionSnapshot.docs.map((doc) => {\n          const id = doc.id;\n          return { ...doc.data(), id };\n        });\n        setProduct(data);\n      });\n  }, []);\n\n  function onSubmit() {\n    const documentRef = firebase.firestore().collection(\"product\").doc();\n    const imageRef = firebase.storage().ref(\"Product-image/\" + documentRef.id);\n    const metadata = {\n      contentType: image.type,\n    };\n    imageRef.put(image, metadata).then(() => {\n      imageRef.getDownloadURL().then((imageURL) => {\n        console.log(commentCount);\n        documentRef\n          .set({\n            name,\n            guests,\n            stars,\n            price,\n            imageURL,\n            address,\n            placeId,\n            latitude,\n            comment,\n            commentCount,\n            topicTag,\n            discountTag,\n            otherTag,\n            // id: firebase.firestore.collection(\"product\"),\n          })\n          .then(() => {\n            window.alert(\"成功新增露營地\");\n            // history.push(\"/\");\n          });\n      });\n    });\n  }\n\n  function renderRoom(item) {\n    return (\n      <Infobox>\n        <Info>露營地名稱：{item.name}</Info>\n        <Info>地址：⌲{item.address}</Info>\n        <Info>床位人數：{item.guests} guests</Info>\n        <Info>NT.{item.price}/night</Info>\n        <PopupEditData item={item} />\n        <Delete\n          onClick={() => {\n            deleteroom(item.id);\n          }}\n        >\n          <RiDeleteBin2Line />\n        </Delete>\n      </Infobox>\n    );\n  }\n\n  function deleteroom(item) {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .doc(item)\n      .delete()\n      .then((error) => {\n        alert(\"成功刪除\");\n      });\n  }\n\n  return (\n    <div className=\"rooms__backstage\">\n      <div className=\"rooms__backstage__title\">上架露營地</div>\n      <div className=\"rooms__backstage__campaing\">\n        <div>\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            type=\"file\"\n            onChange={(e) => setImage(e.target.files[0])}\n            // multiple\n            // onChange={OnFileChange}\n          />\n\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地名稱\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n          {/* <input\n          className=\"rooms__backstage__campaing__input\"\n          placeholder=\"露營地地點\"\n          value={locationDetail}\n          onChange={(e) => setLocationDetail(e.target.value)}\n        /> */}\n          <MapAutocomplete placeaddress={GetAddress} />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地人數\"\n            value={guests}\n            onChange={(e) => setGuests(e.target.value)}\n          />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地評分\"\n            value={stars}\n            onChange={(e) => setStars(e.target.value)}\n          />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地價格\"\n            value={price}\n            onChange={(e) => setPrice(e.target.value)}\n          />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地介紹\"\n            value={comment}\n            onChange={(e) => setComment(e.target.value)}\n          />\n        </div>\n        <div className=\"rooms__infor\">\n          露營標籤\n          <form>\n            露營主題：\n            <select\n              className=\"select\"\n              value={topicTag}\n              onChange={(e) => setTopicTag(e.target.value)}\n            >\n              <option value=\"Seaview\">seaview</option>\n              <option value=\"Mountainview\">Mountainview</option>\n              <option value=\"SwimmingPool\">Swimming Pool</option>\n              <option value=\"Barbecue\">Barbecue</option>\n            </select>\n          </form>\n          <form>\n            地點類型：\n            <select\n              className=\"select\"\n              value={discountTag}\n              onChange={(e) => setDiscountTag(e.target.value)}\n            >\n              <option value=\"懶人露營\">懶人露營</option>\n              <option value=\"親子露營\">親子露營</option>\n              <option value=\"露營車\">露營車</option>\n              <option value=\"免搭帳篷\">免搭帳篷</option>\n            </select>\n          </form>\n          <form>\n            其他資訊：\n            <select\n              className=\"select\"\n              value={otherTag}\n              onChange={(e) => setOtherTag(e.target.value)}\n            >\n              <option value=\"大草原\">大草原</option>\n              <option value=\"夜景\">夜景</option>\n              <option value=\"遊樂設施\">遊樂設施</option>\n              <option value=\"可攜帶寵物\">可攜帶寵物</option>\n            </select>\n          </form>\n          <button className=\"send__btn\" onClick={() => onSubmit()}>\n            送出\n          </button>\n        </div>\n      </div>\n\n      <div className=\"campaing\">\n        <div className=\"rooms__backstage__title\">已上架商品</div>\n        {product.map((item) => renderRoom(item))}\n      </div>\n    </div>\n  );\n}\n\nexport default AddCamp;\n"]},"metadata":{},"sourceType":"module"}