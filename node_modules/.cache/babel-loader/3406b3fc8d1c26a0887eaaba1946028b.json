{"ast":null,"code":"var _jsxFileName = \"/Users/victorchen/Desktop/react-test/my-app/src/components/GoogleMap.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef, useState, useEffect } from \"react\";\nimport { GoogleMap, useLoadScript, Marker, InfoWindow } from \"@react-google-maps/api\";\nimport logo from \"../imge/logo.png\";\nimport styled from \"styled-components\";\nimport firebase from \"firebase\";\nimport { GiCampingTent } from \"react-icons/gi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StyledInfoHeader = styled.h2`\n  color: #3264a8;\n  font-family: sans-serif;\n  font-weight: bold;\n  text-align: center;\n  font-size: 15px;\n`;\n_c = StyledInfoHeader;\nconst StyledInfoRating = styled.h3`\n  color: #b31010;\n  font-family: sans-serif;\n  font-weight: bold;\n  text-align: center;\n`;\n_c2 = StyledInfoRating;\nconst StyledInfoOpening = styled.h2`\n  color: black;\n  font-family: sans-serif;\n  font-weight: bold;\n  text-align: center;\n  font-size: 15px;\n`;\nconst StyledLocationBtn = styled.button`\n  margin-top: 30px;\n  margin-left: calc(50% - 75px);\n  width: 150px;\n  height: 50px;\n  font-size: 20px;\n`;\nconst StyledLoadingContent = styled.div`\n  height: 600px;\n  width: 100%;\n  background: grey;\n`;\nconst libraries = [\"places\"];\nconst mapContainerStyle = {\n  height: \"100vmin\",\n  width: \"100%\"\n};\nexport default function App() {\n  _s();\n\n  const {\n    isLoaded,\n    loadError\n  } = useLoadScript({\n    googleMapsApiKey: \"AIzaSyAAuyNVSxdv2VTjUe_N7hyH8drXIoypa_E\",\n    libraries\n  }); //   const [currentLocation, setCurrentLocation] = useState({\n  //     lat: 25.0361,\n  //     lng: 121.5372,\n  //   });\n\n  const [selected, setSelected] = useState(null);\n  const [nearby, setNearyby] = useState([]);\n  const [places, setPlaces] = useState([]); // const mapRef = useRef();\n  // const onMapLoad = useCallback((map) => {\n  //   mapRef.current = map;\n  // }, []);\n  // useEffect(() => {\n  //   setIsFetching(true)\n  //   console.log(currentLocation)\n  //   fetch(`https://us-central1-uniquefit-william.cloudfunctions.net/getGoogleNearbySearch?lat=${currentLocation.lat}&lng=${currentLocation.lng}`)\n  //     .then(res => res.json())\n  //     .then(json => setNearyby(json.results))\n  // }, []);\n\n  React.useEffect(() => {\n    firebase.firestore().collection(\"product\").onSnapshot(collectionSnapshot => {\n      const data = collectionSnapshot.docs.map(docSnapshot => {\n        const id = docSnapshot.id;\n        return { ...docSnapshot.data(),\n          id\n        };\n      });\n      setPlaces(data);\n      console.log(data);\n    });\n  }, []); //   useEffect(() => {\n  //     navigator.geolocation.getCurrentPosition(\n  //       (position) => {\n  //         setCurrentLocation({\n  //           lat: position.coords.latitude,\n  //           lng: position.coords.longitude,\n  //         });\n  //         fetch(\n  //           `https://us-central1-uniquefit-william.cloudfunctions.net/getGoogleNearbySearch?lat=${position.coords.latitude}&lng=${position.coords.longitude}`\n  //         )\n  //           .then((res) => res.json())\n  //           .then((json) => setNearyby(json.results));\n  //         setIsNavigating(false);\n  //       },\n  //       () => {\n  //         alert(\"Please allow location tracking!\");\n  //         setIsNavigating(false);\n  //       }\n  //     );\n  //   }, []);\n  //   function dragMarker(coords) {\n  //     const { latLng } = coords;\n  //     const lat = latLng.lat();\n  //     const lng = latLng.lng();\n  //     setCurrentLocation({\n  //       lat: lat,\n  //       lng: lng,\n  //     });\n  //     fetch(\n  //       `https://us-central1-uniquefit-william.cloudfunctions.net/getGoogleNearbySearch?lat=${lat}&lng=${lng}`\n  //     )\n  //       .then((res) => res.json())\n  //       .then((json) => setNearyby(json.results));\n  //     setIsNavigating(false);\n  //   }\n\n  if (loadError) return \"Error\";\n  if (!isLoaded) return \"Loading...\"; //   console.log(nearby);\n  //   console.log(selected);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n      id: \"map\",\n      mapContainerStyle: mapContainerStyle,\n      zoom: 8,\n      center: {\n        lat: 23.96363430162278,\n        lng: 120.97561230851146\n      },\n      clickableIcons: false // onLoad={onMapLoad}\n      ,\n      children: [places.map(marker => /*#__PURE__*/_jsxDEV(Marker, {\n        position: {\n          lat: marker.latitude.lat,\n          lng: marker.latitude.lng\n        },\n        onClick: () => {\n          setSelected(marker);\n        },\n        icon: {\n          url: GiCampingTent,\n          origin: new window.google.maps.Point(0, 0),\n          anchor: new window.google.maps.Point(20, 20),\n          scaledSize: new window.google.maps.Size(40, 40)\n        }\n      }, marker.placeId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this)), selected ? /*#__PURE__*/_jsxDEV(InfoWindow, {\n        position: {\n          lat: selected.latitude.lat,\n          lng: selected.latitude.lng\n        },\n        onCloseClick: () => {\n          setSelected(null);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(StyledInfoHeader, {\n            children: selected.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(StyledInfoRating, {\n            children: [\" \", \"\\u2B50 \", selected.stars, \" \\uD83D\\uDCCD \", selected.address]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"OIOVVPN+lKw2RU7FdEjdN9iYONI=\", false, function () {\n  return [useLoadScript];\n});\n\n_c3 = App;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"StyledInfoHeader\");\n$RefreshReg$(_c2, \"StyledInfoRating\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/GoogleMap.js"],"names":["React","useCallback","useRef","useState","useEffect","GoogleMap","useLoadScript","Marker","InfoWindow","logo","styled","firebase","GiCampingTent","StyledInfoHeader","h2","StyledInfoRating","h3","StyledInfoOpening","StyledLocationBtn","button","StyledLoadingContent","div","libraries","mapContainerStyle","height","width","App","isLoaded","loadError","googleMapsApiKey","selected","setSelected","nearby","setNearyby","places","setPlaces","firestore","collection","onSnapshot","collectionSnapshot","data","docs","map","docSnapshot","id","console","log","lat","lng","marker","latitude","url","origin","window","google","maps","Point","anchor","scaledSize","Size","placeId","name","stars","address"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useState, useEffect } from \"react\";\nimport {\n  GoogleMap,\n  useLoadScript,\n  Marker,\n  InfoWindow,\n} from \"@react-google-maps/api\";\nimport logo from \"../imge/logo.png\";\nimport styled from \"styled-components\";\nimport firebase from \"firebase\";\nimport { GiCampingTent } from \"react-icons/gi\";\n\nconst StyledInfoHeader = styled.h2`\n  color: #3264a8;\n  font-family: sans-serif;\n  font-weight: bold;\n  text-align: center;\n  font-size: 15px;\n`;\n\nconst StyledInfoRating = styled.h3`\n  color: #b31010;\n  font-family: sans-serif;\n  font-weight: bold;\n  text-align: center;\n`;\n\nconst StyledInfoOpening = styled.h2`\n  color: black;\n  font-family: sans-serif;\n  font-weight: bold;\n  text-align: center;\n  font-size: 15px;\n`;\n\nconst StyledLocationBtn = styled.button`\n  margin-top: 30px;\n  margin-left: calc(50% - 75px);\n  width: 150px;\n  height: 50px;\n  font-size: 20px;\n`;\n\nconst StyledLoadingContent = styled.div`\n  height: 600px;\n  width: 100%;\n  background: grey;\n`;\n\nconst libraries = [\"places\"];\nconst mapContainerStyle = {\n  height: \"100vmin\",\n  width: \"100%\",\n};\n\nexport default function App() {\n  const { isLoaded, loadError } = useLoadScript({\n    googleMapsApiKey: \"AIzaSyAAuyNVSxdv2VTjUe_N7hyH8drXIoypa_E\",\n    libraries,\n  });\n\n  //   const [currentLocation, setCurrentLocation] = useState({\n  //     lat: 25.0361,\n  //     lng: 121.5372,\n  //   });\n\n  const [selected, setSelected] = useState(null);\n  const [nearby, setNearyby] = useState([]);\n  const [places, setPlaces] = useState([]);\n\n  // const mapRef = useRef();\n  // const onMapLoad = useCallback((map) => {\n  //   mapRef.current = map;\n  // }, []);\n\n  // useEffect(() => {\n  //   setIsFetching(true)\n  //   console.log(currentLocation)\n  //   fetch(`https://us-central1-uniquefit-william.cloudfunctions.net/getGoogleNearbySearch?lat=${currentLocation.lat}&lng=${currentLocation.lng}`)\n  //     .then(res => res.json())\n  //     .then(json => setNearyby(json.results))\n  // }, []);\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .onSnapshot((collectionSnapshot) => {\n        const data = collectionSnapshot.docs.map((docSnapshot) => {\n          const id = docSnapshot.id;\n          return { ...docSnapshot.data(), id };\n        });\n        setPlaces(data);\n        console.log(data);\n      });\n  }, []);\n\n  //   useEffect(() => {\n  //     navigator.geolocation.getCurrentPosition(\n  //       (position) => {\n  //         setCurrentLocation({\n  //           lat: position.coords.latitude,\n  //           lng: position.coords.longitude,\n  //         });\n  //         fetch(\n  //           `https://us-central1-uniquefit-william.cloudfunctions.net/getGoogleNearbySearch?lat=${position.coords.latitude}&lng=${position.coords.longitude}`\n  //         )\n  //           .then((res) => res.json())\n  //           .then((json) => setNearyby(json.results));\n  //         setIsNavigating(false);\n  //       },\n  //       () => {\n  //         alert(\"Please allow location tracking!\");\n  //         setIsNavigating(false);\n  //       }\n  //     );\n  //   }, []);\n\n  //   function dragMarker(coords) {\n  //     const { latLng } = coords;\n  //     const lat = latLng.lat();\n  //     const lng = latLng.lng();\n\n  //     setCurrentLocation({\n  //       lat: lat,\n  //       lng: lng,\n  //     });\n  //     fetch(\n  //       `https://us-central1-uniquefit-william.cloudfunctions.net/getGoogleNearbySearch?lat=${lat}&lng=${lng}`\n  //     )\n  //       .then((res) => res.json())\n  //       .then((json) => setNearyby(json.results));\n  //     setIsNavigating(false);\n  //   }\n\n  if (loadError) return \"Error\";\n  if (!isLoaded) return \"Loading...\";\n\n  //   console.log(nearby);\n  //   console.log(selected);\n\n  return (\n    <div>\n      <GoogleMap\n        id=\"map\"\n        mapContainerStyle={mapContainerStyle}\n        zoom={8}\n        center={{\n          lat: 23.96363430162278,\n          lng: 120.97561230851146,\n        }}\n        clickableIcons={false}\n        // onLoad={onMapLoad}\n      >\n        {/* <Marker\n          position={currentLocation}\n          draggable={true}\n          onDragEnd={(coords) => dragMarker(coords)}\n        /> */}\n        {places.map((marker) => (\n          <Marker\n            key={marker.placeId}\n            position={{\n              lat: marker.latitude.lat,\n              lng: marker.latitude.lng,\n            }}\n            onClick={() => {\n              setSelected(marker);\n            }}\n            icon={{\n              url: GiCampingTent,\n              origin: new window.google.maps.Point(0, 0),\n              anchor: new window.google.maps.Point(20, 20),\n              scaledSize: new window.google.maps.Size(40, 40),\n            }}\n          />\n        ))}\n\n        {selected ? (\n          <InfoWindow\n            position={{\n              lat: selected.latitude.lat,\n              lng: selected.latitude.lng,\n            }}\n            onCloseClick={() => {\n              setSelected(null);\n            }}\n          >\n            <div>\n              <StyledInfoHeader>{selected.name}</StyledInfoHeader>\n              <StyledInfoRating>\n                {\" \"}\n                ‚≠ê {selected.stars} üìç {selected.address}\n              </StyledInfoRating>\n            </div>\n          </InfoWindow>\n        ) : null}\n      </GoogleMap>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}