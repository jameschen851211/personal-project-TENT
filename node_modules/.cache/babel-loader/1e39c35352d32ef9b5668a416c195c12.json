{"ast":null,"code":"import _slicedToArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useState,useEffect}from\"react\";import{GoogleMap,useLoadScript,Marker,InfoWindow}from\"@react-google-maps/api\";import tent from\"../imge/camping-tent.png\";import styled from\"styled-components\";import firebase from\"firebase\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledInfoArea=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 200px;\\n\"])));var StyledInfoName=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  color: black;\\n  margin-top: 5px;\\n  font-size: 15px;\\n  font-family: sans-serif;\\n  font-weight: bold;\\n\"])));var StyledInfoAddress=styled.h4(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  color: gray;\\n  font-family: sans-serif;\\n  font-weight: bold;\\n\"])));var StyledInfoPrice=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  color: black;\\n  font-size: 20px;\\n  font-family: sans-serif;\\n  font-weight: bold;\\n\"])));var StyledInfoImage=styled.img(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  width: 100%;\\n\"])));var libraries=[\"places\"];var mapContainerStyle={height:\"100vmin\",width:\"100%\"};export default function App(props){console.log(props);var _useLoadScript=useLoadScript({googleMapsApiKey:\"AIzaSyAAuyNVSxdv2VTjUe_N7hyH8drXIoypa_E\",libraries:libraries}),isLoaded=_useLoadScript.isLoaded,loadError=_useLoadScript.loadError;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),places=_useState4[0],setPlaces=_useState4[1];//   useEffect(() => {\n//     firebase\n//       .firestore()\n//       .collection(\"product\")\n//       .onSnapshot((collectionSnapshot) => {\n//         const data = collectionSnapshot.docs.map((docSnapshot) => {\n//           const id = docSnapshot.id;\n//           return { ...docSnapshot.data(), id };\n//         });\n//         setPlaces(data);\n//         console.log(data);\n//       });\n//   }, []);\nif(loadError)return\"Error\";if(!isLoaded)return\"Loading...\";//   console.log(nearby);\n//   console.log(selected);\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(GoogleMap,{id:\"map\",mapContainerStyle:mapContainerStyle,zoom:8,center:{lat:23.96363430162278,lng:120.97561230851146},clickableIcons:false// onLoad={onMapLoad}\n,children:[props.search.map(function(marker){return/*#__PURE__*/_jsx(Marker,{position:{lat:marker.latitude.lat,lng:marker.latitude.lng},onClick:function onClick(){setSelected(marker);},icon:{url:tent,origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(20,20),scaledSize:new window.google.maps.Size(40,40)}},marker.placeId);}),selected?/*#__PURE__*/_jsx(InfoWindow,{position:{lat:selected.latitude.lat,lng:selected.latitude.lng},onCloseClick:function onCloseClick(){setSelected(null);},children:/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(selected.id),children:/*#__PURE__*/_jsxs(StyledInfoArea,{children:[/*#__PURE__*/_jsx(StyledInfoImage,{src:selected.imageURL}),/*#__PURE__*/_jsxs(StyledInfoName,{children:[selected.name,\"\\u2605\",selected.stars]}),/*#__PURE__*/_jsxs(StyledInfoAddress,{children:[\"\\uD83D\\uDCCD\",selected.address]}),/*#__PURE__*/_jsxs(StyledInfoPrice,{children:[selected.price,\"/\\u4E00\\u665A\"]})]})})}):null]})});}","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/GoogleMapSearch.js"],"names":["React","useState","useEffect","GoogleMap","useLoadScript","Marker","InfoWindow","tent","styled","firebase","Link","StyledInfoArea","div","StyledInfoName","StyledInfoAddress","h4","StyledInfoPrice","StyledInfoImage","img","libraries","mapContainerStyle","height","width","App","props","console","log","googleMapsApiKey","isLoaded","loadError","selected","setSelected","places","setPlaces","lat","lng","search","map","marker","latitude","url","origin","window","google","maps","Point","anchor","scaledSize","Size","placeId","id","imageURL","name","stars","address","price"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  GoogleMap,\n  useLoadScript,\n  Marker,\n  InfoWindow,\n} from \"@react-google-maps/api\";\nimport tent from \"../imge/camping-tent.png\";\nimport styled from \"styled-components\";\nimport firebase from \"firebase\";\nimport { Link } from \"react-router-dom\";\n\nconst StyledInfoArea = styled.div`\n  width: 200px;\n`;\n\nconst StyledInfoName = styled.div`\n  color: black;\n  margin-top: 5px;\n  font-size: 15px;\n  font-family: sans-serif;\n  font-weight: bold;\n`;\n\nconst StyledInfoAddress = styled.h4`\n  color: gray;\n  font-family: sans-serif;\n  font-weight: bold;\n`;\nconst StyledInfoPrice = styled.div`\n  color: black;\n  font-size: 20px;\n  font-family: sans-serif;\n  font-weight: bold;\n`;\n\nconst StyledInfoImage = styled.img`\n  width: 100%;\n`;\n\nconst libraries = [\"places\"];\nconst mapContainerStyle = {\n  height: \"100vmin\",\n  width: \"100%\",\n};\n\nexport default function App(props) {\n  console.log(props);\n  const { isLoaded, loadError } = useLoadScript({\n    googleMapsApiKey: \"AIzaSyAAuyNVSxdv2VTjUe_N7hyH8drXIoypa_E\",\n    libraries,\n  });\n\n  const [selected, setSelected] = useState(null);\n  const [places, setPlaces] = useState([]);\n\n  //   useEffect(() => {\n  //     firebase\n  //       .firestore()\n  //       .collection(\"product\")\n  //       .onSnapshot((collectionSnapshot) => {\n  //         const data = collectionSnapshot.docs.map((docSnapshot) => {\n  //           const id = docSnapshot.id;\n  //           return { ...docSnapshot.data(), id };\n  //         });\n  //         setPlaces(data);\n  //         console.log(data);\n  //       });\n  //   }, []);\n\n  if (loadError) return \"Error\";\n  if (!isLoaded) return \"Loading...\";\n\n  //   console.log(nearby);\n  //   console.log(selected);\n\n  return (\n    <div>\n      <GoogleMap\n        id=\"map\"\n        mapContainerStyle={mapContainerStyle}\n        zoom={8}\n        center={{\n          lat: 23.96363430162278,\n          lng: 120.97561230851146,\n        }}\n        clickableIcons={false}\n        // onLoad={onMapLoad}\n      >\n        {/* <Marker\n          position={currentLocation}\n          draggable={true}\n          onDragEnd={(coords) => dragMarker(coords)}\n        /> */}\n        {props.search.map((marker) => (\n          <Marker\n            key={marker.placeId}\n            position={{\n              lat: marker.latitude.lat,\n              lng: marker.latitude.lng,\n            }}\n            onClick={() => {\n              setSelected(marker);\n            }}\n            icon={{\n              url: tent,\n              origin: new window.google.maps.Point(0, 0),\n              anchor: new window.google.maps.Point(20, 20),\n              scaledSize: new window.google.maps.Size(40, 40),\n            }}\n          />\n        ))}\n\n        {selected ? (\n          <InfoWindow\n            position={{\n              lat: selected.latitude.lat,\n              lng: selected.latitude.lng,\n            }}\n            onCloseClick={() => {\n              setSelected(null);\n            }}\n          >\n            <Link to={`/products/${selected.id}`}>\n              <StyledInfoArea>\n                <StyledInfoImage src={selected.imageURL} />\n                <StyledInfoName>\n                  {selected.name}★{selected.stars}\n                </StyledInfoName>\n                <StyledInfoAddress>📍{selected.address}</StyledInfoAddress>\n                <StyledInfoPrice>{selected.price}/一晚</StyledInfoPrice>\n              </StyledInfoArea>\n            </Link>\n          </InfoWindow>\n        ) : null}\n      </GoogleMap>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}