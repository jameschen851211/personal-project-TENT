{"ast":null,"code":"import _slicedToArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React from\"react\";import\"./OrderChack.css\";import p9 from\"../imge/img-5.jpeg\";import firebase from\"firebase\";import{useParams,useHistory}from\"react-router-dom\";import styled from\"styled-components\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Input=styled.input(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  height: 30px;\\n  width: 120%;\\n  margin-top: 10px;\\n\"])));function OrderChack(){var _useParams=useParams(),orderID=_useParams.orderID;var _useParams2=useParams(),itemID=_useParams2.itemID;var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),order=_React$useState2[0],setOrder=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),rooms=_React$useState4[0],setRooms=_React$useState4[1];var _React$useState5=React.useState(),_React$useState6=_slicedToArray(_React$useState5,2),cardnumber=_React$useState6[0],setCardnumber=_React$useState6[1];var _React$useState7=React.useState(),_React$useState8=_slicedToArray(_React$useState7,2),carddate=_React$useState8[0],setCarddate=_React$useState8[1];var _React$useState9=React.useState(),_React$useState10=_slicedToArray(_React$useState9,2),cardcode=_React$useState10[0],setCardCode=_React$useState10[1];// const [errormessage, setErrorMessage] = React.useState();\nvar history=useHistory();React.useEffect(function(){firebase.firestore().collection(\"order\").doc(orderID).onSnapshot(function(docSnapshot){var data=docSnapshot.data();setOrder(data);// console.log(data);\n});},[]);React.useEffect(function(){firebase.firestore().collection(\"product\").doc(itemID).onSnapshot(function(docSnapshot){var data=docSnapshot.data();setRooms(data);console.log(data);});},[]);function onSubmit(){var orderSuccessfullyID=firebase.firestore().collection(\"successfullyOrder\").doc().id;firebase.firestore().collection(\"successfullyOrder\").doc(orderSuccessfullyID).set({itemID:itemID,orderID:orderID,cardnumber:cardnumber,carddate:carddate,cardcode:cardcode,uid:firebase.auth().currentUser.uid,imageURL:rooms.imageURL,name:rooms.name,location:rooms.locationDetail,startDate:order.startDate,endDate:order.endDate,count:order.count}).then(function(){window.alert(\"已成功訂房\");history.push(\"/\");});// .catch((error) => {\n//   switch(e.targer.cardnumber){\n//   }\n// });\n}return order?/*#__PURE__*/_jsxs(\"div\",{className:\"order\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order__list\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order__title\",children:\"\\u78BA\\u8A8D\\u4E26\\u4ED8\\u6B3E\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"order__sub__title\",children:\"\\u4F60\\u7684\\u65C5\\u7A0B\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__choose\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order__date\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order__date__date\",children:\"\\u65E5\\u671F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__date__range\",children:[order.startDate.toDate().toLocaleDateString(),\"-\",order.endDate.toDate().toLocaleDateString()]}),/*#__PURE__*/_jsx(\"div\",{className:\"order__edit\",children:\"\\u7DE8\\u8F2F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__guests\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order__guests_guests\",children:\"\\u623F\\u5BA2\\u4EBA\\u6578\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__guests__number\",children:[order.count,\"\\u4F4D\\u623F\\u5BA2\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"order__edit\",children:\"\\u7DE8\\u8F2F\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__pay\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"order__pay__title\",children:\"\\u4ED8\\u6B3E\\u65B9\\u5F0F\\uFF1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"order__pay__creditcard\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(Input,{value:cardnumber,placeholder:\"\\u5361\\u865F\",onChange:function onChange(e){return setCardnumber(e.target.value);}}),/*#__PURE__*/_jsx(Input,{value:carddate,placeholder:\"\\u5230\\u671F\\u65E5\",onChange:function onChange(e){return setCarddate(e.target.value);}}),/*#__PURE__*/_jsx(Input,{value:cardcode,placeholder:\"\\u5B89\\u5168\\u78BC\",onChange:function onChange(e){return setCardCode(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return onSubmit();},children:\"\\u78BA\\u8A8D\\u4E26\\u4ED8\\u6B3E\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"order__room\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"room__box\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"room__img\",alt:\"room__img\",src:rooms.imageURL}),/*#__PURE__*/_jsxs(\"div\",{className:\"room__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"room__location\",children:[\"\\u2332\",rooms.locationDetail]}),/*#__PURE__*/_jsx(\"div\",{className:\"room__title\",children:rooms.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"room__stars\",children:[\"\\u2605\",rooms.stars,/*#__PURE__*/_jsx(\"span\",{className:\"visit\",children:\" (5 comments)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"room__price\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"room__price__title\",children:\"\\u50F9\\u683C\\u8A73\\u60C5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"room__price__night\",children:[\"NT.\",rooms.price,\" x 1\\u665A\"]})]})]})})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading\"});}export default OrderChack;","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/OrderChack.js"],"names":["React","p9","firebase","useParams","useHistory","styled","Input","input","OrderChack","orderID","itemID","useState","order","setOrder","rooms","setRooms","cardnumber","setCardnumber","carddate","setCarddate","cardcode","setCardCode","history","useEffect","firestore","collection","doc","onSnapshot","docSnapshot","data","console","log","onSubmit","orderSuccessfullyID","id","set","uid","auth","currentUser","imageURL","name","location","locationDetail","startDate","endDate","count","then","window","alert","push","toDate","toLocaleDateString","e","target","value","stars","price"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./OrderChack.css\";\nimport p9 from \"../imge/img-5.jpeg\";\nimport firebase from \"firebase\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nconst Input = styled.input`\n  display: flex;\n  height: 30px;\n  width: 120%;\n  margin-top: 10px;\n`;\n\nfunction OrderChack() {\n  const { orderID } = useParams();\n  const { itemID } = useParams();\n  const [order, setOrder] = React.useState();\n  const [rooms, setRooms] = React.useState();\n  const [cardnumber, setCardnumber] = React.useState();\n  const [carddate, setCarddate] = React.useState();\n  const [cardcode, setCardCode] = React.useState();\n  // const [errormessage, setErrorMessage] = React.useState();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"order\")\n      .doc(orderID)\n      .onSnapshot((docSnapshot) => {\n        const data = docSnapshot.data();\n        setOrder(data);\n        // console.log(data);\n      });\n  }, []);\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .doc(itemID)\n      .onSnapshot((docSnapshot) => {\n        const data = docSnapshot.data();\n        setRooms(data);\n        console.log(data);\n      });\n  }, []);\n\n  function onSubmit() {\n    const orderSuccessfullyID = firebase\n      .firestore()\n      .collection(\"successfullyOrder\")\n      .doc().id;\n    firebase\n      .firestore()\n      .collection(\"successfullyOrder\")\n      .doc(orderSuccessfullyID)\n      .set({\n        itemID,\n        orderID,\n        cardnumber,\n        carddate,\n        cardcode,\n        uid: firebase.auth().currentUser.uid,\n        imageURL: rooms.imageURL,\n        name: rooms.name,\n        location: rooms.locationDetail,\n        startDate: order.startDate,\n        endDate: order.endDate,\n        count: order.count,\n      })\n      .then(() => {\n        window.alert(\"已成功訂房\");\n        history.push(\"/\");\n      });\n    // .catch((error) => {\n    //   switch(e.targer.cardnumber){\n\n    //   }\n    // });\n  }\n\n  return order ? (\n    <div className=\"order\">\n      <div className=\"order__list\">\n        <div className=\"order__title\">確認並付款</div>\n        <h2 className=\"order__sub__title\">你的旅程</h2>\n        {/* {order.map((order) => randerOrder(order))} */}\n        <div className=\"order__choose\">\n          <div className=\"order__date\">\n            <div className=\"order__date__date\">日期</div>\n            <div className=\"order__date__range\">\n              {order.startDate.toDate().toLocaleDateString()}-\n              {order.endDate.toDate().toLocaleDateString()}\n            </div>\n            <div className=\"order__edit\">編輯</div>\n          </div>\n          <div className=\"order__guests\">\n            <div className=\"order__guests_guests\">房客人數</div>\n            <div className=\"order__guests__number\">{order.count}位房客</div>\n            <div className=\"order__edit\">編輯</div>\n          </div>\n        </div>\n\n        <div className=\"order__pay\">\n          <h2 className=\"order__pay__title\">付款方式：</h2>\n          <div className=\"order__pay__creditcard\">\n            <form>\n              <Input\n                value={cardnumber}\n                placeholder=\"卡號\"\n                onChange={(e) => setCardnumber(e.target.value)}\n              />\n              <Input\n                value={carddate}\n                placeholder=\"到期日\"\n                onChange={(e) => setCarddate(e.target.value)}\n              />\n              <Input\n                value={cardcode}\n                placeholder=\"安全碼\"\n                onChange={(e) => setCardCode(e.target.value)}\n              />\n            </form>\n          </div>\n          <button className=\"button\" onClick={() => onSubmit()}>\n            確認並付款\n          </button>\n          {/* {errormessage && <h6 style={{ color: \"black\" }}>{errormessage}</h6>} */}\n        </div>\n      </div>\n      <div className=\"order__room\">\n        <div className=\"room__box\">\n          <img className=\"room__img\" alt=\"room__img\" src={rooms.imageURL}></img>\n          <div className=\"room__info\">\n            <div className=\"room__location\">⌲{rooms.locationDetail}</div>\n            <div className=\"room__title\">{rooms.name}</div>\n            <div className=\"room__stars\">\n              ★{rooms.stars}\n              <span className=\"visit\"> (5 comments)</span>\n            </div>\n          </div>\n\n          <div className=\"room__price\">\n            <h2 className=\"room__price__title\">價格詳情</h2>\n            <div className=\"room__price__night\">NT.{rooms.price} x 1晚</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  ) : (\n    <div>loading</div>\n  );\n}\n\nexport default OrderChack;\n"]},"metadata":{},"sourceType":"module"}