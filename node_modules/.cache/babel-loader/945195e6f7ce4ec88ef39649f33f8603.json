{"ast":null,"code":"import _objectSpread from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React from\"react\";import firebase from\"firebase\";import{useHistory}from\"react-router-dom\";import\"./AddCamp.css\";import MapAutocomplete from\"./MapAutocamplete\";import{v4 as uuidv4}from\"uuid\";import styled from\"styled-components\";import{RiDeleteBin2Line}from\"react-icons/ri\";import{BiPencil}from\"react-icons/bi\";import PopupEditData from\"./PopupEditData\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Infobox=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin: 30px;\\n  padding: 30px;\\n  width: 90%;\\n  border-style: solid;\\n  border-width: 1px;\\n  border-color: gray;\\n  border-radius: 10px;\\n  display: flex;\\n  /* justify-content: space-between; */\\n\"])));var Info=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin-right: 20px;\\n\"])));var Delete=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-size: 20px;\\n  border-style: none;\\n  background-color: white;\\n  cursor: pointer;\\n  &:hover {\\n    color: red;\\n  }\\n\"])));// const Edit = styled.button`\n//   font-size: 20px;\n//   border-style: none;\n//   background-color: white;\n//   cursor: pointer;\n//   &:hover {\n//     color: blue;\n//   }\n// `;\nfunction AddCamp(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),name=_React$useState2[0],setName=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),locationDetail=_React$useState4[0],setLocationDetail=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),guests=_React$useState6[0],setGuests=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),stars=_React$useState8[0],setStars=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),price=_React$useState10[0],setPrice=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),comment=_React$useState12[0],setComment=_React$useState12[1];var _React$useState13=React.useState(\"\"),_React$useState14=_slicedToArray(_React$useState13,2),topicTag=_React$useState14[0],setTopicTag=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),discountTag=_React$useState16[0],setDiscountTag=_React$useState16[1];var _React$useState17=React.useState(\"\"),_React$useState18=_slicedToArray(_React$useState17,2),otherTag=_React$useState18[0],setOtherTag=_React$useState18[1];var _React$useState19=React.useState(0),_React$useState20=_slicedToArray(_React$useState19,2),commentCount=_React$useState20[0],setCommentCount=_React$useState20[1];var _React$useState21=React.useState([]),_React$useState22=_slicedToArray(_React$useState21,2),product=_React$useState22[0],setProduct=_React$useState22[1];var _React$useState23=React.useState(null),_React$useState24=_slicedToArray(_React$useState23,2),image=_React$useState24[0],setImage=_React$useState24[1];var _React$useState25=React.useState(\"\"),_React$useState26=_slicedToArray(_React$useState25,2),address=_React$useState26[0],setAddress=_React$useState26[1];var _React$useState27=React.useState(\"\"),_React$useState28=_slicedToArray(_React$useState27,2),placeId=_React$useState28[0],setPlaceId=_React$useState28[1];var _React$useState29=React.useState({}),_React$useState30=_slicedToArray(_React$useState29,2),latitude=_React$useState30[0],setLatitude=_React$useState30[1];var history=useHistory();var GetAddress=function GetAddress(addressdata){setAddress(addressdata[0]);setPlaceId(addressdata[1]);setLatitude(addressdata[2]);};// const OnFileChange = (e) => {\n//   // Get Files\n//   for (let i = 0; i < e.target.files.length; i++) {\n//     const newFile = e.target.files[i];\n//     const id = uuidv4();\n//     newFile[\"id\"] = id;\n//     setImage((prevState) => [...prevState, newFile]);\n//   }\n// };\nReact.useEffect(function(){firebase.firestore().collection(\"product\").onSnapshot(function(collectionSnapshot){var data=collectionSnapshot.docs.map(function(doc){var id=doc.id;return _objectSpread(_objectSpread({},doc.data()),{},{id:id});});setProduct(data);});},[]);function onSubmit(){var documentRef=firebase.firestore().collection(\"product\").doc();var imageRef=firebase.storage().ref(\"Product-image/\"+documentRef.id);var metadata={contentType:image.type};imageRef.put(image,metadata).then(function(){imageRef.getDownloadURL().then(function(imageURL){console.log(commentCount);documentRef.set({name:name,guests:guests,stars:stars,price:price,imageURL:imageURL,address:address,placeId:placeId,latitude:latitude,comment:comment,commentCount:commentCount,topicTag:topicTag,discountTag:discountTag,otherTag:otherTag// id: firebase.firestore.collection(\"product\"),\n}).then(function(){window.alert(\"成功新增露營地\");// history.push(\"/\");\n});});});}function renderRoom(item){return/*#__PURE__*/_jsxs(Infobox,{children:[/*#__PURE__*/_jsxs(Info,{children:[\"\\u9732\\u71DF\\u5730\\u540D\\u7A31\\uFF1A\",item.name]}),/*#__PURE__*/_jsxs(Info,{children:[\"\\u5730\\u5740\\uFF1A\\u2332\",item.address]}),/*#__PURE__*/_jsxs(Info,{children:[\"\\u5E8A\\u4F4D\\u4EBA\\u6578\\uFF1A\",item.guests,\" guests\"]}),/*#__PURE__*/_jsxs(Info,{children:[\"NT.\",item.price,\"/night\"]}),/*#__PURE__*/_jsx(PopupEditData,{item:item}),/*#__PURE__*/_jsx(Delete,{onClick:function onClick(){deleteroom(item.id);},children:/*#__PURE__*/_jsx(RiDeleteBin2Line,{})})]});}function deleteroom(item){firebase.firestore().collection(\"product\").doc(item).delete().then(function(error){alert(\"成功刪除\");});}return/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__backstage\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rooms__backstage__title\",children:\"\\u4E0A\\u67B6\\u9732\\u71DF\\u5730\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__backstage__campaing\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"rooms__backstage__campaing__input\",type:\"file\",onChange:function onChange(e){return setImage(e.target.files[0]);}// multiple\n// onChange={OnFileChange}\n}),/*#__PURE__*/_jsx(\"input\",{className:\"rooms__backstage__campaing__input\",placeholder:\"\\u9732\\u71DF\\u5730\\u540D\\u7A31\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(MapAutocomplete,{placeaddress:GetAddress}),/*#__PURE__*/_jsx(\"input\",{className:\"rooms__backstage__campaing__input\",placeholder:\"\\u9732\\u71DF\\u5730\\u4EBA\\u6578\",value:guests,onChange:function onChange(e){return setGuests(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"rooms__backstage__campaing__input\",placeholder:\"\\u9732\\u71DF\\u5730\\u8A55\\u5206\",value:stars,onChange:function onChange(e){return setStars(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"rooms__backstage__campaing__input\",placeholder:\"\\u9732\\u71DF\\u5730\\u50F9\\u683C\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"rooms__backstage__campaing__input\",placeholder:\"\\u9732\\u71DF\\u5730\\u4ECB\\u7D39\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rooms__infor\",children:[\"\\u9732\\u71DF\\u6A19\\u7C64\",/*#__PURE__*/_jsxs(\"form\",{children:[\"\\u9732\\u71DF\\u4E3B\\u984C\\uFF1A\",/*#__PURE__*/_jsxs(\"select\",{className:\"select\",value:topicTag,onChange:function onChange(e){return setTopicTag(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Seaview\",children:\"seaview\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Mountainview\",children:\"Mountainview\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SwimmingPool\",children:\"Swimming Pool\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Barbecue\",children:\"Barbecue\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{children:[\"\\u5730\\u9EDE\\u985E\\u578B\\uFF1A\",/*#__PURE__*/_jsxs(\"select\",{className:\"select\",value:discountTag,onChange:function onChange(e){return setDiscountTag(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u61F6\\u4EBA\\u9732\\u71DF\",children:\"\\u61F6\\u4EBA\\u9732\\u71DF\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u89AA\\u5B50\\u9732\\u71DF\",children:\"\\u89AA\\u5B50\\u9732\\u71DF\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u9732\\u71DF\\u8ECA\",children:\"\\u9732\\u71DF\\u8ECA\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u514D\\u642D\\u5E33\\u7BF7\",children:\"\\u514D\\u642D\\u5E33\\u7BF7\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{children:[\"\\u5176\\u4ED6\\u8CC7\\u8A0A\\uFF1A\",/*#__PURE__*/_jsxs(\"select\",{className:\"select\",value:otherTag,onChange:function onChange(e){return setOtherTag(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\\u5927\\u8349\\u539F\",children:\"\\u5927\\u8349\\u539F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u591C\\u666F\",children:\"\\u591C\\u666F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u904A\\u6A02\\u8A2D\\u65BD\",children:\"\\u904A\\u6A02\\u8A2D\\u65BD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u53EF\\u651C\\u5E36\\u5BF5\\u7269\",children:\"\\u53EF\\u651C\\u5E36\\u5BF5\\u7269\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"send__btn\",onClick:function onClick(){return onSubmit();},children:\"\\u9001\\u51FA\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"campaing\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rooms__backstage__title\",children:\"\\u5DF2\\u4E0A\\u67B6\\u5546\\u54C1\"}),product.map(function(item){return renderRoom(item);})]})]});}export default AddCamp;","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/AddCamp.js"],"names":["React","firebase","useHistory","MapAutocomplete","v4","uuidv4","styled","RiDeleteBin2Line","BiPencil","PopupEditData","Infobox","div","Info","Delete","button","AddCamp","useState","name","setName","locationDetail","setLocationDetail","guests","setGuests","stars","setStars","price","setPrice","comment","setComment","topicTag","setTopicTag","discountTag","setDiscountTag","otherTag","setOtherTag","commentCount","setCommentCount","product","setProduct","image","setImage","address","setAddress","placeId","setPlaceId","latitude","setLatitude","history","GetAddress","addressdata","useEffect","firestore","collection","onSnapshot","collectionSnapshot","data","docs","map","doc","id","onSubmit","documentRef","imageRef","storage","ref","metadata","contentType","type","put","then","getDownloadURL","imageURL","console","log","set","window","alert","renderRoom","item","deleteroom","delete","error","e","target","files","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport firebase from \"firebase\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./AddCamp.css\";\nimport MapAutocomplete from \"./MapAutocamplete\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport styled from \"styled-components\";\nimport { RiDeleteBin2Line } from \"react-icons/ri\";\nimport { BiPencil } from \"react-icons/bi\";\nimport PopupEditData from \"./PopupEditData\";\n\nconst Infobox = styled.div`\n  margin: 30px;\n  padding: 30px;\n  width: 90%;\n  border-style: solid;\n  border-width: 1px;\n  border-color: gray;\n  border-radius: 10px;\n  display: flex;\n  /* justify-content: space-between; */\n`;\n\nconst Info = styled.div`\n  margin-right: 20px;\n`;\n\nconst Delete = styled.button`\n  font-size: 20px;\n  border-style: none;\n  background-color: white;\n  cursor: pointer;\n  &:hover {\n    color: red;\n  }\n`;\n\n// const Edit = styled.button`\n//   font-size: 20px;\n//   border-style: none;\n//   background-color: white;\n//   cursor: pointer;\n//   &:hover {\n//     color: blue;\n//   }\n// `;\n\nfunction AddCamp() {\n  const [name, setName] = React.useState(\"\");\n  const [locationDetail, setLocationDetail] = React.useState(\"\");\n  const [guests, setGuests] = React.useState(\"\");\n  const [stars, setStars] = React.useState(\"\");\n  const [price, setPrice] = React.useState(\"\");\n  const [comment, setComment] = React.useState(\"\");\n  const [topicTag, setTopicTag] = React.useState(\"\");\n  const [discountTag, setDiscountTag] = React.useState(\"\");\n  const [otherTag, setOtherTag] = React.useState(\"\");\n  const [commentCount, setCommentCount] = React.useState(0);\n  const [product, setProduct] = React.useState([]);\n  const [image, setImage] = React.useState(null);\n  const [address, setAddress] = React.useState(\"\");\n  const [placeId, setPlaceId] = React.useState(\"\");\n  const [latitude, setLatitude] = React.useState({});\n  const history = useHistory();\n\n  const GetAddress = (addressdata) => {\n    setAddress(addressdata[0]);\n    setPlaceId(addressdata[1]);\n    setLatitude(addressdata[2]);\n  };\n\n  // const OnFileChange = (e) => {\n  //   // Get Files\n  //   for (let i = 0; i < e.target.files.length; i++) {\n  //     const newFile = e.target.files[i];\n  //     const id = uuidv4();\n  //     newFile[\"id\"] = id;\n  //     setImage((prevState) => [...prevState, newFile]);\n  //   }\n  // };\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .onSnapshot((collectionSnapshot) => {\n        const data = collectionSnapshot.docs.map((doc) => {\n          const id = doc.id;\n          return { ...doc.data(), id };\n        });\n        setProduct(data);\n      });\n  }, []);\n\n  function onSubmit() {\n    const documentRef = firebase.firestore().collection(\"product\").doc();\n    const imageRef = firebase.storage().ref(\"Product-image/\" + documentRef.id);\n    const metadata = {\n      contentType: image.type,\n    };\n    imageRef.put(image, metadata).then(() => {\n      imageRef.getDownloadURL().then((imageURL) => {\n        console.log(commentCount);\n        documentRef\n          .set({\n            name,\n            guests,\n            stars,\n            price,\n            imageURL,\n            address,\n            placeId,\n            latitude,\n            comment,\n            commentCount,\n            topicTag,\n            discountTag,\n            otherTag,\n            // id: firebase.firestore.collection(\"product\"),\n          })\n          .then(() => {\n            window.alert(\"成功新增露營地\");\n            // history.push(\"/\");\n          });\n      });\n    });\n  }\n\n  function renderRoom(item) {\n    return (\n      <Infobox>\n        <Info>露營地名稱：{item.name}</Info>\n        <Info>地址：⌲{item.address}</Info>\n        <Info>床位人數：{item.guests} guests</Info>\n        <Info>NT.{item.price}/night</Info>\n        <PopupEditData item={item} />\n        <Delete\n          onClick={() => {\n            deleteroom(item.id);\n          }}\n        >\n          <RiDeleteBin2Line />\n        </Delete>\n      </Infobox>\n    );\n  }\n\n  function deleteroom(item) {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .doc(item)\n      .delete()\n      .then((error) => {\n        alert(\"成功刪除\");\n      });\n  }\n\n  return (\n    <div className=\"rooms__backstage\">\n      <div className=\"rooms__backstage__title\">上架露營地</div>\n      <div className=\"rooms__backstage__campaing\">\n        <div>\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            type=\"file\"\n            onChange={(e) => setImage(e.target.files[0])}\n            // multiple\n            // onChange={OnFileChange}\n          />\n\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地名稱\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n          {/* <input\n          className=\"rooms__backstage__campaing__input\"\n          placeholder=\"露營地地點\"\n          value={locationDetail}\n          onChange={(e) => setLocationDetail(e.target.value)}\n        /> */}\n          <MapAutocomplete placeaddress={GetAddress} />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地人數\"\n            value={guests}\n            onChange={(e) => setGuests(e.target.value)}\n          />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地評分\"\n            value={stars}\n            onChange={(e) => setStars(e.target.value)}\n          />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地價格\"\n            value={price}\n            onChange={(e) => setPrice(e.target.value)}\n          />\n          <input\n            className=\"rooms__backstage__campaing__input\"\n            placeholder=\"露營地介紹\"\n            value={comment}\n            onChange={(e) => setComment(e.target.value)}\n          />\n        </div>\n        <div className=\"rooms__infor\">\n          露營標籤\n          <form>\n            露營主題：\n            <select\n              className=\"select\"\n              value={topicTag}\n              onChange={(e) => setTopicTag(e.target.value)}\n            >\n              <option value=\"Seaview\">seaview</option>\n              <option value=\"Mountainview\">Mountainview</option>\n              <option value=\"SwimmingPool\">Swimming Pool</option>\n              <option value=\"Barbecue\">Barbecue</option>\n            </select>\n          </form>\n          <form>\n            地點類型：\n            <select\n              className=\"select\"\n              value={discountTag}\n              onChange={(e) => setDiscountTag(e.target.value)}\n            >\n              <option value=\"懶人露營\">懶人露營</option>\n              <option value=\"親子露營\">親子露營</option>\n              <option value=\"露營車\">露營車</option>\n              <option value=\"免搭帳篷\">免搭帳篷</option>\n            </select>\n          </form>\n          <form>\n            其他資訊：\n            <select\n              className=\"select\"\n              value={otherTag}\n              onChange={(e) => setOtherTag(e.target.value)}\n            >\n              <option value=\"大草原\">大草原</option>\n              <option value=\"夜景\">夜景</option>\n              <option value=\"遊樂設施\">遊樂設施</option>\n              <option value=\"可攜帶寵物\">可攜帶寵物</option>\n            </select>\n          </form>\n          <button className=\"send__btn\" onClick={() => onSubmit()}>\n            送出\n          </button>\n        </div>\n      </div>\n\n      <div className=\"campaing\">\n        <div className=\"rooms__backstage__title\">已上架商品</div>\n        {product.map((item) => renderRoom(item))}\n      </div>\n    </div>\n  );\n}\n\nexport default AddCamp;\n"]},"metadata":{},"sourceType":"module"}