{"ast":null,"code":"import _slicedToArray from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/victorchen/Desktop/react-test/my-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10;import React from\"react\";import\"./OrderChack.css\";import firebase from\"firebase\";import{useParams,useHistory}from\"react-router-dom\";import styled from\"styled-components\";import Swal from\"sweetalert2/dist/sweetalert2.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Input=styled.input(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  height: 30px;\\n  width: 120%;\\n  margin-top: 10px;\\n\"])));var OrderCheckImage=styled.img(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 40%;\\n  border-radius: 7px;\\n  object-fit: cover;\\n\"])));var OrderCheckBox=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  margin: 5px 150px 10px 30px;\\n  border-radius: 12px;\\n  box-shadow: rgb(0 0 0 / 12%) 0px 6px 16px;\\n  border-style: solid;\\n  border: 1px solid rgb(221, 221, 221);\\n  width: 300px;\\n  height: 380px;\\n\"])));var OrderCheckBoxName=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  color: black;\\n\\n  font-size: 18px;\\n  font-family: sans-serif;\\n  font-weight: bold;\\n\"])));var OrderCheckBoxInfo=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin: 20px 20px 0px 20px;\\n\"])));var OrderCheckBoxAddress=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  font-size: 15px;\\n  color: gray;\\n  margin-top: 5px;\\n\"])));var OrderCheckBoxPriceTitle=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  margin: 10px 20px 20px 20px;\\n  font-size: 25px;\\n  font-weight: 600;\\n  margin-top: 15px;\\n\"])));var Hr=styled.hr(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  width: 90%;\\n  margin-top: 10px;\\n\"])));var OrderCheckBoxPriceNight=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  margin: 20px;\\n  display: flex;\\n  justify-content: space-between;\\n\"])));var TotlePrice=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  margin-left: 10px;\\n  font-size: 20px;\\n  font-weight: 600;\\n\"])));function OrderChack(){var _useParams=useParams(),orderID=_useParams.orderID;var _useParams2=useParams(),itemID=_useParams2.itemID;var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),order=_React$useState2[0],setOrder=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),rooms=_React$useState4[0],setRooms=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),cardnumber=_React$useState6[0],setCardnumber=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),carddate=_React$useState8[0],setCarddate=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),cardcode=_React$useState10[0],setCardCode=_React$useState10[1];// const [errormessage, setErrorMessage] = React.useState();\nvar history=useHistory();React.useEffect(function(){firebase.firestore().collection(\"order\").doc(orderID).onSnapshot(function(docSnapshot){var data=docSnapshot.data();setOrder(data);console.log(data);});},[]);React.useEffect(function(){firebase.firestore().collection(\"product\").doc(itemID).onSnapshot(function(docSnapshot){var data=docSnapshot.data();setRooms(data);console.log(data);});},[]);function onSubmit(){var orderSuccessfullyID=firebase.firestore().collection(\"successfullyOrder\").doc().id;if(cardnumber===\"\"){Swal.fire(\"請輸入信用卡號\");}else if(cardnumber.length<16){Swal.fire(\"請輸入正確16碼卡號\");}else if(carddate===\"\"){Swal.fire(\"請輸入到期日\");}else if(carddate.length<4){Swal.fire(\"請輸正確入到期日\");}else if(cardcode===\"\"){Swal.fire(\"請輸入安全碼\");}else if(cardcode.length<3){Swal.fire(\"請輸入正確安全碼\");}else{firebase.firestore().collection(\"successfullyOrder\").doc(orderSuccessfullyID).set({itemID:itemID,orderID:orderID,cardnumber:cardnumber,carddate:carddate,cardcode:cardcode,uid:firebase.auth().currentUser.uid,imageURL:rooms.imageURL,name:rooms.name,// location: rooms.locationDetail,\nstartDate:order.startDate,endDate:order.endDate,count:order.count}).then(function(){Swal.fire({position:\"top-end\",icon:\"success\",title:\"已成功訂房\",showConfirmButton:false,timer:1500});history.push(\"/\");});}}return order?/*#__PURE__*/_jsxs(\"div\",{className:\"order\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order__list\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order__title\",children:\"\\u78BA\\u8A8D\\u4E26\\u4ED8\\u6B3E\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"order__sub__title\",children:\"\\u4F60\\u7684\\u65C5\\u7A0B\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__choose\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order__date\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order__date__date\",children:\"\\u65E5\\u671F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__date__range\",children:[order.startDate.toDate().toLocaleDateString(),\"-\",order.endDate.toDate().toLocaleDateString()]}),/*#__PURE__*/_jsx(\"div\",{className:\"order__edit\",children:\"\\u7DE8\\u8F2F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__guests\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order__guests_guests\",children:\"\\u623F\\u5BA2\\u4EBA\\u6578\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__guests__number\",children:[order.count,\"\\u4F4D\\u623F\\u5BA2\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"order__edit\",children:\"\\u7DE8\\u8F2F\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order__pay\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"order__pay__title\",children:\"\\u4ED8\\u6B3E\\u65B9\\u5F0F\\uFF1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"order__pay__creditcard\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(Input,{value:cardnumber,placeholder:\"\\u5361\\u865F\",onChange:function onChange(e){return setCardnumber(e.target.value);}}),/*#__PURE__*/_jsx(Input,{value:carddate,placeholder:\"\\u5230\\u671F\\u65E5\",onChange:function onChange(e){return setCarddate(e.target.value);}}),/*#__PURE__*/_jsx(Input,{value:cardcode,placeholder:\"\\u5B89\\u5168\\u78BC\",onChange:function onChange(e){return setCardCode(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return onSubmit();},children:\"\\u78BA\\u8A8D\\u4E26\\u4ED8\\u6B3E\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"order__room\",children:rooms?/*#__PURE__*/_jsxs(OrderCheckBox,{children:[/*#__PURE__*/_jsx(OrderCheckImage,{src:rooms.imageURL}),/*#__PURE__*/_jsxs(OrderCheckBoxInfo,{children:[/*#__PURE__*/_jsxs(OrderCheckBoxName,{children:[rooms.name,\"\\u2605\",rooms.stars,\"(\",rooms.commentCount,\" \\u8A55\\u8AD6)\"]}),/*#__PURE__*/_jsxs(OrderCheckBoxAddress,{children:[\"\\u2332\",rooms.address]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"room__price\",children:[/*#__PURE__*/_jsx(Hr,{}),/*#__PURE__*/_jsx(OrderCheckBoxPriceTitle,{children:\"\\u50F9\\u683C\\u8A73\\u60C5\"}),/*#__PURE__*/_jsxs(OrderCheckBoxPriceNight,{children:[\"NT.\",rooms.price,\" x\",\" \",order?(order.endDate.seconds-order.startDate.seconds)/(24*60*60):0,\"\\u665A\",/*#__PURE__*/_jsxs(TotlePrice,{children:[\"NT.\",(order.endDate.seconds-order.startDate.seconds)/(24*60*60)*rooms.price]})]})]})]}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading\"})})]}):/*#__PURE__*/_jsx(\"div\",{children:\"loading\"});}export default OrderChack;","map":{"version":3,"sources":["/Users/victorchen/Desktop/react-test/my-app/src/components/OrderChack.js"],"names":["React","firebase","useParams","useHistory","styled","Swal","Input","input","OrderCheckImage","img","OrderCheckBox","div","OrderCheckBoxName","OrderCheckBoxInfo","OrderCheckBoxAddress","OrderCheckBoxPriceTitle","Hr","hr","OrderCheckBoxPriceNight","TotlePrice","OrderChack","orderID","itemID","useState","order","setOrder","rooms","setRooms","cardnumber","setCardnumber","carddate","setCarddate","cardcode","setCardCode","history","useEffect","firestore","collection","doc","onSnapshot","docSnapshot","data","console","log","onSubmit","orderSuccessfullyID","id","fire","length","set","uid","auth","currentUser","imageURL","name","startDate","endDate","count","then","position","icon","title","showConfirmButton","timer","push","toDate","toLocaleDateString","e","target","value","stars","commentCount","address","price","seconds"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./OrderChack.css\";\n\nimport firebase from \"firebase\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Swal from \"sweetalert2/dist/sweetalert2.js\";\n\nconst Input = styled.input`\n  display: flex;\n  height: 30px;\n  width: 120%;\n  margin-top: 10px;\n`;\n\nconst OrderCheckImage = styled.img`\n  width: 100%;\n  height: 40%;\n  border-radius: 7px;\n  object-fit: cover;\n`;\n\nconst OrderCheckBox = styled.div`\n  margin: 5px 150px 10px 30px;\n  border-radius: 12px;\n  box-shadow: rgb(0 0 0 / 12%) 0px 6px 16px;\n  border-style: solid;\n  border: 1px solid rgb(221, 221, 221);\n  width: 300px;\n  height: 380px;\n`;\n\nconst OrderCheckBoxName = styled.div`\n  color: black;\n\n  font-size: 18px;\n  font-family: sans-serif;\n  font-weight: bold;\n`;\n\nconst OrderCheckBoxInfo = styled.div`\n  margin: 20px 20px 0px 20px;\n`;\n\nconst OrderCheckBoxAddress = styled.div`\n  font-size: 15px;\n  color: gray;\n  margin-top: 5px;\n`;\n\nconst OrderCheckBoxPriceTitle = styled.div`\n  margin: 10px 20px 20px 20px;\n  font-size: 25px;\n  font-weight: 600;\n  margin-top: 15px;\n`;\n\nconst Hr = styled.hr`\n  width: 90%;\n  margin-top: 10px;\n`;\n\nconst OrderCheckBoxPriceNight = styled.div`\n  margin: 20px;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst TotlePrice = styled.div`\n  margin-left: 10px;\n  font-size: 20px;\n  font-weight: 600;\n`;\n\nfunction OrderChack() {\n  const { orderID } = useParams();\n  const { itemID } = useParams();\n  const [order, setOrder] = React.useState();\n  const [rooms, setRooms] = React.useState();\n  const [cardnumber, setCardnumber] = React.useState(\"\");\n  const [carddate, setCarddate] = React.useState(\"\");\n  const [cardcode, setCardCode] = React.useState(\"\");\n  // const [errormessage, setErrorMessage] = React.useState();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"order\")\n      .doc(orderID)\n      .onSnapshot((docSnapshot) => {\n        const data = docSnapshot.data();\n        setOrder(data);\n        console.log(data);\n      });\n  }, []);\n\n  React.useEffect(() => {\n    firebase\n      .firestore()\n      .collection(\"product\")\n      .doc(itemID)\n      .onSnapshot((docSnapshot) => {\n        const data = docSnapshot.data();\n        setRooms(data);\n        console.log(data);\n      });\n  }, []);\n\n  function onSubmit() {\n    const orderSuccessfullyID = firebase\n      .firestore()\n      .collection(\"successfullyOrder\")\n      .doc().id;\n    if (cardnumber === \"\") {\n      Swal.fire(\"請輸入信用卡號\");\n    } else if (cardnumber.length < 16) {\n      Swal.fire(\"請輸入正確16碼卡號\");\n    } else if (carddate === \"\") {\n      Swal.fire(\"請輸入到期日\");\n    } else if (carddate.length < 4) {\n      Swal.fire(\"請輸正確入到期日\");\n    } else if (cardcode === \"\") {\n      Swal.fire(\"請輸入安全碼\");\n    } else if (cardcode.length < 3) {\n      Swal.fire(\"請輸入正確安全碼\");\n    } else {\n      firebase\n        .firestore()\n        .collection(\"successfullyOrder\")\n        .doc(orderSuccessfullyID)\n        .set({\n          itemID,\n          orderID,\n          cardnumber,\n          carddate,\n          cardcode,\n          uid: firebase.auth().currentUser.uid,\n          imageURL: rooms.imageURL,\n          name: rooms.name,\n          // location: rooms.locationDetail,\n          startDate: order.startDate,\n          endDate: order.endDate,\n          count: order.count,\n        })\n        .then(() => {\n          Swal.fire({\n            position: \"top-end\",\n            icon: \"success\",\n            title: \"已成功訂房\",\n            showConfirmButton: false,\n            timer: 1500,\n          });\n          history.push(\"/\");\n        });\n    }\n  }\n\n  return order ? (\n    <div className=\"order\">\n      <div className=\"order__list\">\n        <div className=\"order__title\">確認並付款</div>\n        <h2 className=\"order__sub__title\">你的旅程</h2>\n        {/* {order.map((order) => randerOrder(order))} */}\n        <div className=\"order__choose\">\n          <div className=\"order__date\">\n            <div className=\"order__date__date\">日期</div>\n            <div className=\"order__date__range\">\n              {order.startDate.toDate().toLocaleDateString()}-\n              {order.endDate.toDate().toLocaleDateString()}\n            </div>\n            <div className=\"order__edit\">編輯</div>\n          </div>\n          <div className=\"order__guests\">\n            <div className=\"order__guests_guests\">房客人數</div>\n            <div className=\"order__guests__number\">{order.count}位房客</div>\n            <div className=\"order__edit\">編輯</div>\n          </div>\n        </div>\n\n        <div className=\"order__pay\">\n          <h2 className=\"order__pay__title\">付款方式：</h2>\n          <div className=\"order__pay__creditcard\">\n            <form>\n              <Input\n                value={cardnumber}\n                placeholder=\"卡號\"\n                onChange={(e) => setCardnumber(e.target.value)}\n              />\n              <Input\n                value={carddate}\n                placeholder=\"到期日\"\n                onChange={(e) => setCarddate(e.target.value)}\n              />\n              <Input\n                value={cardcode}\n                placeholder=\"安全碼\"\n                onChange={(e) => setCardCode(e.target.value)}\n              />\n            </form>\n          </div>\n          <button className=\"button\" onClick={() => onSubmit()}>\n            確認並付款\n          </button>\n          {/* {errormessage && <h6 style={{ color: \"black\" }}>{errormessage}</h6>} */}\n        </div>\n      </div>\n      <div className=\"order__room\">\n        {rooms ? (\n          <OrderCheckBox>\n            <OrderCheckImage src={rooms.imageURL}></OrderCheckImage>\n            <OrderCheckBoxInfo>\n              <OrderCheckBoxName>\n                {rooms.name}★{rooms.stars}({rooms.commentCount} 評論)\n              </OrderCheckBoxName>\n\n              <OrderCheckBoxAddress>⌲{rooms.address}</OrderCheckBoxAddress>\n            </OrderCheckBoxInfo>\n\n            <div className=\"room__price\">\n              <Hr />\n              <OrderCheckBoxPriceTitle>價格詳情</OrderCheckBoxPriceTitle>\n              <OrderCheckBoxPriceNight>\n                NT.{rooms.price} x{\" \"}\n                {order\n                  ? (order.endDate.seconds - order.startDate.seconds) /\n                    (24 * 60 * 60)\n                  : 0}\n                晚\n                <TotlePrice>\n                  NT.\n                  {((order.endDate.seconds - order.startDate.seconds) /\n                    (24 * 60 * 60)) *\n                    rooms.price}\n                </TotlePrice>\n              </OrderCheckBoxPriceNight>\n            </div>\n          </OrderCheckBox>\n        ) : (\n          <div>Loading</div>\n        )}\n      </div>\n    </div>\n  ) : (\n    <div>loading</div>\n  );\n}\n\nexport default OrderChack;\n"]},"metadata":{},"sourceType":"module"}